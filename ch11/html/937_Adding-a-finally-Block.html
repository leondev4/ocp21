<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"","children":[{"content":"Adding a finally Block","children":[{"content":"The <code>try</code> statement also lets you run code at the end with<br>\na <code>finally</code> clause, regardless of whether an exception is<br>\nthrown.","children":[{"content":"There are two paths through code with both a <code>catch</code> and a <code>finally</code>. If an<br>\nexception is thrown, the <code>finally</code> block is run after the <code>catch</code> block. If no<br>\nexception is thrown, the <code>finally</code> block is run after the <code>try</code> block completes.","children":[{"content":"The syntax of a <code>try</code> statement with <code>finally</code>","children":[{"content":"\n<pre data-lines=\"14,26\"><code class=\"language-js\"><span class=\"hljs-keyword\">try</span> {\n  <span class=\"hljs-comment\">// Protected code</span>\n  <span class=\"hljs-comment\">// The catch block is optional when using finally </span>\n  <span class=\"hljs-comment\">// (not for checked exceptions, but you can use throws)</span>\n} <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">Exception</span> e) {\n      <span class=\"hljs-comment\">// Exception handler</span>\n} <span class=\"hljs-keyword\">finally</span> { <span class=\"hljs-comment\">// finally keyword</span>\n      <span class=\"hljs-comment\">//The finally block always executes, whether</span>\n      <span class=\"hljs-comment\">// or not an exception occurs.</span>\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"14,26"}}],"payload":{"tag":"li","lines":"13,26"}}],"payload":{"tag":"li","lines":"10,26"}}],"payload":{"tag":"li","lines":"7,26"}},{"content":"\n<pre data-lines=\"26,35\"><code class=\"language-js\"><span class=\"hljs-number\">25</span>: <span class=\"hljs-keyword\">try</span> { <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">26</span>:   <span class=\"hljs-title function_\">fall</span>();\n<span class=\"hljs-number\">27</span>: } <span class=\"hljs-keyword\">finally</span> {\n<span class=\"hljs-number\">28</span>:   <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;all better&quot;</span>);\n<span class=\"hljs-number\">29</span>: }<span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">Exception</span> e) {\n<span class=\"hljs-number\">30</span>:   <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;get up&quot;</span>);\n<span class=\"hljs-number\">31</span>: }\n</code></pre>","children":[{"content":"Does not compile because the <code>catch</code> and<br>\n<code>finally</code> blocks are in the wrong order.","children":[{"content":"\n<pre data-lines=\"37,42\"><code data-lines=\"37,42\"><span class=\"hljs-number\">33</span>:try{ // DOES NOT COMPILE\n<span class=\"hljs-number\">34</span>:     <span class=\"hljs-built_in\">fall</span>();\n<span class=\"hljs-number\">35</span>:  }\n</code></pre>","children":[{"content":"Does not compile because there<br>\nmust be a <code>catch</code> or <code>finally</code> block","children":[],"payload":{"tag":"li","lines":"42,44"}}],"payload":{"tag":"li","lines":"37,44"}}],"payload":{"tag":"li","lines":"35,44"}}],"payload":{"tag":"li","lines":"26,44"}},{"content":"\n<pre data-lines=\"44,51\"><code class=\"language-js\"><span class=\"hljs-number\">37</span>:<span class=\"hljs-keyword\">try</span> {\n<span class=\"hljs-number\">38</span>:      <span class=\"hljs-title function_\">fall</span>();\n<span class=\"hljs-number\">39</span>: }<span class=\"hljs-keyword\">finally</span>{\n<span class=\"hljs-number\">40</span>:       <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;all better&quot;</span>);\n<span class=\"hljs-number\">41</span>: }\n</code></pre>","children":[{"content":"It is just fine. The <code>catch</code> block is not<br>\nrequired if <code>finally</code> is present.","children":[],"payload":{"tag":"li","lines":"51,53"}}],"payload":{"tag":"li","lines":"44,53"}},{"content":"\n<pre data-lines=\"53,67\"><code data-lines=\"53,67\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> main(String[] unused) {\n  StringBuilder sb = <span class=\"hljs-keyword\">new</span> StringBuilder();\n    <span class=\"hljs-keyword\">try</span> {\n        sb.<span class=\"hljs-keyword\">append</span>(<span class=\"hljs-string\">&quot;t&quot;</span>);\n    } <span class=\"hljs-keyword\">catch</span> (Exception e) {\n        sb.<span class=\"hljs-keyword\">append</span>(<span class=\"hljs-string\">&quot;c&quot;</span>);\n    } <span class=\"hljs-keyword\">finally</span> {\n        sb.<span class=\"hljs-keyword\">append</span>(<span class=\"hljs-string\">&quot;f&quot;</span>);\n    }\n  sb.<span class=\"hljs-keyword\">append</span>(<span class=\"hljs-string\">&quot;a&quot;</span>);\n  System.out.<span class=\"hljs-keyword\">print</span>(sb.toString());\n}\n</code></pre>","children":[{"content":"This code outputs <code>tfa</code>. The <code>try</code> block is executed. Since no<br>\nexception is thrown, Java goes straight to the <code>finally</code> block.<br>\nThen the code after the <code>try</code> statement is run.","children":[],"payload":{"tag":"li","lines":"67,70"}}],"payload":{"tag":"li","lines":"53,70"}},{"content":"The <code>finally</code> block will always be executed, regardless<br>\nof whether the code completes successfully, unless<br>\nyou execute <code>System.exit(0)</code>.","children":[{"content":"\n<pre data-lines=\"73,88\"><code class=\"language-js\"><span class=\"hljs-number\">12</span>:int <span class=\"hljs-title function_\">goHome</span>(<span class=\"hljs-params\"></span>) {\n<span class=\"hljs-number\">13</span>:    <span class=\"hljs-keyword\">try</span> {\n<span class=\"hljs-number\">14</span>:      <span class=\"hljs-comment\">// Optionally throw an exception here</span>\n<span class=\"hljs-number\">15</span>:      <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">&quot;1&quot;</span>);\n<span class=\"hljs-number\">16</span>:      <span class=\"hljs-keyword\">return</span> -&#xad;<span class=\"hljs-number\">1</span>;\n<span class=\"hljs-number\">17</span>:     } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">Exception</span> e) {\n<span class=\"hljs-number\">18</span>:       <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">&quot;2&quot;</span>);\n<span class=\"hljs-number\">19</span>:       <span class=\"hljs-keyword\">return</span> -&#xad;<span class=\"hljs-number\">2</span>;\n<span class=\"hljs-number\">20</span>:     } <span class=\"hljs-keyword\">finally</span> {\n<span class=\"hljs-number\">21</span>:        <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">&quot;3&quot;</span>);\n<span class=\"hljs-number\">22</span>:        <span class=\"hljs-keyword\">return</span> -&#xad;<span class=\"hljs-number\">3</span>;\n<span class=\"hljs-number\">23</span>:     }\n<span class=\"hljs-number\">24</span>:}\n</code></pre>","children":[{"content":"If line 14 does not throw an exception, print: <code>13</code><br>\nIf line 14 throws an exception, print: <code>32</code>","children":[],"payload":{"tag":"li","lines":"88,90"}},{"content":"The method always returns <code>-3</code>. Because the <code>finally</code> block is<br>\nexecuted shortly before the method completes, it interrupts<br>\nthe <code>return</code> statement from inside both the <code>try</code> and <code>catch</code> blocks.","children":[],"payload":{"tag":"li","lines":"90,93"}}],"payload":{"tag":"li","lines":"73,93"}}],"payload":{"tag":"li","lines":"70,93"}},{"content":"While a <code>finally</code> block will always execute, it may not terminate.<br>\nFor example, if an exception is thrown inside it.","children":[{"content":"When <code>System.exit()</code> is called in the <code>try</code> or<br>\n<code>catch</code> block, the <code>finally</code> block does not run.","children":[],"payload":{"tag":"li","lines":"95,97"}}],"payload":{"tag":"li","lines":"93,97"}}],"payload":{"tag":"h1","lines":"6,7"}},{"content":"<strong>Try-&#xad;with-&#xad;Resources</strong>","children":[{"content":"Java includes the <em>try-&#xad;with-&#xad;resources</em> statement to automatically close all<br>\nresources opened in a <code>try</code> clause. This feature is also known as <em>automatic<br>\nresource management</em>, because Java automatically takes care of the closing.","children":[],"payload":{"tag":"li","lines":"98,101"}},{"content":"Example:","children":[{"content":"\n<pre data-lines=\"102,111\"><code class=\"language-js\"><span class=\"hljs-number\">4</span>: <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">read</span>(<span class=\"hljs-params\"></span>){\n<span class=\"hljs-number\">5</span>:   <span class=\"hljs-title function_\">try</span> (<span class=\"hljs-title class_\">FileInputStream</span> is = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;myfile.txt&quot;</span>)) {\n<span class=\"hljs-number\">6</span>:      <span class=\"hljs-comment\">// Read file data</span>\n<span class=\"hljs-number\">7</span>:   } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">IOException</span> e) {\n<span class=\"hljs-number\">8</span>:       e.<span class=\"hljs-title function_\">printStackTrace</span>();\n<span class=\"hljs-number\">9</span>:   }\n<span class=\"hljs-number\">10</span>:}\n</code></pre>","children":[{"content":"Using a try-&#xad;with-&#xad;resources statement, we guarantee that as soon as a connection<br>\npasses out of scope, Java will attempt to close it within the same method","children":[],"payload":{"tag":"li","lines":"111,113"}},{"content":"Behind the scenes, the compiler replaces a try-&#xad;with-&#xad;resources block with a <code>try</code><br>\nand <code>finally</code> block. We refer to this &#x201c;hidden&#x201d; <code>finally</code> block as an implicit <code>finally</code> block<br>\nsince it is created and used by the compiler automatically. You can still create a<br>\n<code>finally</code> or <code>catch</code> blocks when using a try-&#xad;with-&#xad;resources statement; just be aware<br>\nthat the <strong>implicit one will be called first</strong>.","children":[],"payload":{"tag":"li","lines":"113,118"}}],"payload":{"tag":"li","lines":"102,118"}}],"payload":{"tag":"li","lines":"101,118"}},{"content":"When <strong>multiple resources are opened, they are closed in the reverse of<br>\nthe order in which they were created</strong>. Also, notice that <strong>parentheses are<br>\nused to list those resources, and semicolons are used to separate the<br>\ndeclarations</strong>. This works just like declaring multiple indexes in a for loop.","children":[{"content":"You learned that a normal try statement must have one or more <code>catch</code> blocks or a <code>finally</code> block.<br>\nIn a try-&#xad;with-&#xad;resources statement neither of these is required, although a developer may add<br>\nboth. For the exam, you need to know that the implicit <code>finally</code> block runs before any<br>\nprogrammer-&#xad;coded ones.","children":[],"payload":{"tag":"li","lines":"122,126"}}],"payload":{"tag":"li","lines":"118,126"}},{"content":"Syntax of a basic try-&#xad;with-&#xad;resources","children":[{"content":"\n<pre data-lines=\"127,139\"><code class=\"language-js\"><span class=\"hljs-title function_\">try</span> (<span class=\"hljs-keyword\">var</span> <span class=\"hljs-keyword\">in</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;data.txt&quot;</span>); <span class=\"hljs-comment\">//Required semicolon between resources</span>\n  <span class=\"hljs-keyword\">var</span> out = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileOutputStream</span>(<span class=\"hljs-string\">&quot;output.txt&quot;</span>);) {<span class=\"hljs-comment\">//optional semicolon at the end</span>\n    <span class=\"hljs-comment\">//resources are in and out</span>\n    <span class=\"hljs-comment\">//Protected code</span>\n} <span class=\"hljs-comment\">//Resources are closed here in reverse order.</span>\n<span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">IOException</span> e) { <span class=\"hljs-comment\">//Optional if add it in throws clause</span>\n    <span class=\"hljs-comment\">// Exception handler</span>\n} <span class=\"hljs-keyword\">finally</span> {  <span class=\"hljs-comment\">//Optional</span>\n    <span class=\"hljs-comment\">// finally block` </span>\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"127,139"}}],"payload":{"tag":"li","lines":"126,139"}},{"content":"<code>catch</code> block is optional with a try-&#xad;with-&#xad;resources statement. For<br>\nexample, we can rewrite the previous <code>read()</code> example so that<br>\nthe method declares the exception to make it even shorter:","children":[{"content":"\n<pre data-lines=\"142,149\"><code class=\"language-js\"><span class=\"hljs-number\">4</span>: <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">read</span>() throws <span class=\"hljs-title class_\">IOException</span>{\n<span class=\"hljs-number\">5</span>:    <span class=\"hljs-title function_\">try</span> (<span class=\"hljs-title class_\">FileInputStream</span> is = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;myfile.txt&quot;</span>)) {\n<span class=\"hljs-number\">6</span>:       <span class=\"hljs-comment\">// Read file data</span>\n<span class=\"hljs-number\">7</span>:   }\n<span class=\"hljs-number\">10</span>:}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"142,149"}}],"payload":{"tag":"li","lines":"139,149"}},{"content":"<strong>Only classes that implement the <code>AutoCloseable</code> or <code>Closable</code><br>\ninterface can be used in a try-with-resources statement</strong>.","children":[{"content":"\n<pre data-lines=\"151,156\"><code data-lines=\"151,156\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">AutoCloseable</span></span>{\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">close</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception</span>;\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"151,156"}},{"content":"\n<pre data-lines=\"156,161\"><code class=\"language-js\">interface <span class=\"hljs-title class_\">Closeable</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AutoCloseable</span>{\n  public <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">close</span>() throws <span class=\"hljs-title class_\">IOException</span>;\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"156,161"}},{"content":"\n<pre data-lines=\"161,169\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyFileClass</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">AutoCloseable</span> {\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> num;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">MyFileClass</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> num)</span> { <span class=\"hljs-built_in\">this</span>.num = num; }\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">close</span><span class=\"hljs-params\">()</span> {\n      System.out.println(<span class=\"hljs-string\">&quot;Closing: &quot;</span> + num);\n  } }\n</code></pre>","children":[],"payload":{"tag":"li","lines":"161,169"}}],"payload":{"tag":"li","lines":"149,169"}},{"content":"<strong>Declaring Resources:</strong> While try-&#xad;with-&#xad;resources does support<br>\ndeclaring multiple variables, each variable must be declared in<br>\na separate statement","children":[{"content":"\n<pre data-lines=\"172,178\"><code class=\"language-java\"><span class=\"hljs-keyword\">try</span> (<span class=\"hljs-type\">MyFileClass</span> <span class=\"hljs-variable\">is</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyFileClass</span>(<span class=\"hljs-number\">1</span>), <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n  os = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyFileClass</span>(<span class=\"hljs-number\">2</span>)) { <span class=\"hljs-comment\">//Missing semicolon, also the </span>\n                             <span class=\"hljs-comment\">//type in the second resource</span>\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"172,178"}},{"content":"\n<pre data-lines=\"178,183\"><code class=\"language-java\"><span class=\"hljs-keyword\">try</span>(<span class=\"hljs-type\">MyFileClass</span> <span class=\"hljs-variable\">ab</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyFileClass</span>(<span class=\"hljs-number\">1</span>), <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n    <span class=\"hljs-type\">MyFileClass</span> <span class=\"hljs-variable\">cd</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyFileClass</span>(<span class=\"hljs-number\">2</span>)) { <span class=\"hljs-comment\">//missing semicolon</span>\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"178,183"}},{"content":"You can declare a resource using <code>var</code>:<pre data-lines=\"184,189\"><code class=\"language-js\"><span class=\"hljs-title function_\">try</span> (<span class=\"hljs-keyword\">var</span> f = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BufferedInputStream</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FileInputStream</span>(<span class=\"hljs-string\">&quot;it.txt&quot;</span>))) {\n  <span class=\"hljs-comment\">// Process file</span>\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"183,189"}}],"payload":{"tag":"li","lines":"169,189"}}],"payload":{"tag":"h1","lines":"97,98"}},{"content":"<strong>Scope of Try-&#xad;with-&#xad;Resources</strong>","children":[{"content":"Resources created in the <code>try</code> clause are in scope only<br>\nwithin the <code>try</code> block. Implicit finally runs before any<br>\ncatch/finally blocks that you code yourself","children":[{"content":"\n<pre data-lines=\"193,202\"><code class=\"language-js\"><span class=\"hljs-number\">3</span>: <span class=\"hljs-title function_\">try</span> (<span class=\"hljs-title class_\">Scanner</span> s = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Scanner</span>(<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">in</span>)) {\n<span class=\"hljs-number\">4</span>:   s.<span class=\"hljs-title function_\">nextLine</span>(); <span class=\"hljs-comment\">//THE SCOPE OF s IS ONLY HERE</span>\n<span class=\"hljs-number\">5</span>: } <span class=\"hljs-keyword\">catch</span>(<span class=\"hljs-title class_\">Exception</span> e) {\n<span class=\"hljs-number\">6</span>:   s.<span class=\"hljs-title function_\">nextInt</span>(); <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">7</span>: } <span class=\"hljs-keyword\">finally</span> {\n<span class=\"hljs-number\">8</span>:   s.<span class=\"hljs-title function_\">nextInt</span>(); <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">9</span>: }\n</code></pre>","children":[],"payload":{"tag":"li","lines":"193,202"}}],"payload":{"tag":"li","lines":"190,202"}}],"payload":{"tag":"h1","lines":"189,190"}},{"content":"<strong>Following Order of Operations</strong>","children":[{"content":"In try-&#xad;with-&#xad;resources statement, the resources are closed<br>\nin the reverse of the order in which they are created.","children":[],"payload":{"tag":"li","lines":"203,205"}},{"content":"\n<pre data-lines=\"205,216\"><code class=\"language-js\"><span class=\"hljs-title function_\">try</span>(<span class=\"hljs-params\">MyFileClass bookReader = <span class=\"hljs-keyword\">new</span> MyFileClass(<span class=\"hljs-number\">1</span>);\n    MyFileClass movieReader = <span class=\"hljs-keyword\">new</span> MyFileClass(<span class=\"hljs-number\">2</span>)</span>) {\n  <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Try Block&quot;</span>);\n  <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>();\n} <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">Exception</span> e) {\n  <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Catch Block&quot;</span>);\n} <span class=\"hljs-keyword\">finally</span> {\n  <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Finally Block&quot;</span>);\n}\n</code></pre>","children":[{"content":"The output is as follows:<pre data-lines=\"217,224\"><code data-lines=\"217,224\"><span class=\"hljs-variable\">Try</span> <span class=\"hljs-built_in\">Block</span>\n<span class=\"hljs-built_in\">Closing</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-number\">2</span>\n<span class=\"hljs-built_in\">Closing</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-number\">1</span>\n<span class=\"hljs-built_in\">Catch</span> <span class=\"hljs-built_in\">Block</span>\n<span class=\"hljs-variable\">Finally</span> <span class=\"hljs-built_in\">Block</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"216,224"}}],"payload":{"tag":"li","lines":"205,224"}}],"payload":{"tag":"h1","lines":"202,203"}},{"content":"<strong>Applying Effectively Final</strong>","children":[{"content":"It is possible to declare resources ahead of time, provided<br>\nthey are <strong>marked <code>final</code> or effectively final</strong>. The syntax uses<br>\nthe resource name in place of the resource declaration,<br>\nseparated by a semicolon (<code>;</code>).","children":[{"content":"\n<pre data-lines=\"229,242\"><code class=\"language-js\"><span class=\"hljs-number\">11</span>: public <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">String</span>... xyz</span>) {\n<span class=\"hljs-number\">12</span>:   final <span class=\"hljs-keyword\">var</span> bookReader = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyFileClass</span>(<span class=\"hljs-number\">4</span>);\n<span class=\"hljs-number\">13</span>:   <span class=\"hljs-title class_\">MyFileClass</span> movieReader = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyFileClass</span>(<span class=\"hljs-number\">5</span>);\n<span class=\"hljs-number\">14</span>:   <span class=\"hljs-title function_\">try</span> (bookReader;\n<span class=\"hljs-number\">15</span>:        <span class=\"hljs-keyword\">var</span> tvReader = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyFileClass</span>(<span class=\"hljs-number\">6</span>);\n<span class=\"hljs-number\">16</span>:        movieReader){\n<span class=\"hljs-number\">17</span>:     <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Try Block&quot;</span>);\n<span class=\"hljs-number\">18</span>:   } <span class=\"hljs-keyword\">finally</span> {\n<span class=\"hljs-number\">19</span>:   <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Finally Block&quot;</span>);\n<span class=\"hljs-number\">20</span>:  }\n<span class=\"hljs-number\">21</span>: }\n</code></pre>","children":[{"content":"Line 12 declares a <code>final</code> variable <code>bookReader</code>, while line 13 declares an effectively final variable<br>\n<code>movieReader</code>. Both of these resources can be used in a try-&#xad;with-&#xad;resources statement.<br>\nWe know <code>movieReader</code> is effectively final because it is a local variable that is assigned a value<br>\nonly once. The test for effectively final is that if we insert the <code>final</code> keyword when the variable<br>\nis declared, the code still compiles.<br>\nLines 14 and 16 use the new syntax to declare resources in a try-&#xad;with-&#xad;resources statement,<br>\nusing just the variable name and separating the resources with a semicolon (<code>;</code>).","children":[],"payload":{"tag":"li","lines":"242,249"}},{"content":"On execution, the code prints the following:<pre data-lines=\"250,257\"><code data-lines=\"250,257\"><span class=\"hljs-variable\">Try</span> <span class=\"hljs-built_in\">Block</span>\n<span class=\"hljs-built_in\">Closing</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-number\">5</span>\n<span class=\"hljs-built_in\">Closing</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-number\">6</span>\n<span class=\"hljs-built_in\">Closing</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-number\">4</span>\n<span class=\"hljs-variable\">Finally</span> <span class=\"hljs-built_in\">Block</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"249,257"}}],"payload":{"tag":"li","lines":"229,257"}},{"content":"If you see a question on the exam that uses a try-&#xad;with-&#xad;resources<br>\nstatement with a variable not declared in the try clause, make<br>\nsure it is effectively final.","children":[{"content":"\n<pre data-lines=\"260,267\"><code class=\"language-js\"><span class=\"hljs-number\">31</span>: <span class=\"hljs-keyword\">var</span> writer = <span class=\"hljs-title class_\">Files</span>.<span class=\"hljs-title function_\">newBufferedWriter</span>(path);\n<span class=\"hljs-number\">32</span>:   <span class=\"hljs-title function_\">try</span> (writer) { <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">33</span>:     writer.<span class=\"hljs-title function_\">append</span>(<span class=\"hljs-string\">&quot;Welcome to the zoo!&quot;</span>);\n<span class=\"hljs-number\">34</span>:   }\n<span class=\"hljs-number\">35</span>: writer = <span class=\"hljs-literal\">null</span>;\n</code></pre>","children":[{"content":"The <code>writer</code> variable is reassigned on line 35. Since it is not an<br>\neffectively final variable, it cannot be used in a try-&#xad;with-&#xad;resources<br>\nstatement on line 32.","children":[],"payload":{"tag":"li","lines":"267,270"}}],"payload":{"tag":"li","lines":"260,270"}}],"payload":{"tag":"li","lines":"257,270"}},{"content":"The other place the exam might try to trick you<br>\nis accessing a resource after it has been closed.","children":[{"content":"\n<pre data-lines=\"272,280\"><code class=\"language-js\"><span class=\"hljs-number\">41</span>: <span class=\"hljs-keyword\">var</span> writer = <span class=\"hljs-title class_\">Files</span>.<span class=\"hljs-title function_\">newBufferedWriter</span>(path);\n<span class=\"hljs-number\">42</span>: writer.<span class=\"hljs-title function_\">append</span>(<span class=\"hljs-string\">&quot;This write is permitted but a really bad idea!&quot;</span>);\n<span class=\"hljs-number\">43</span>: <span class=\"hljs-title function_\">try</span> (writer) {\n<span class=\"hljs-number\">44</span>:   writer.<span class=\"hljs-title function_\">append</span>(<span class=\"hljs-string\">&quot;Welcome to the zoo!&quot;</span>);\n<span class=\"hljs-number\">45</span>: }\n<span class=\"hljs-number\">46</span>: writer.<span class=\"hljs-title function_\">append</span>(<span class=\"hljs-string\">&quot;This write will fail!&quot;</span>); <span class=\"hljs-comment\">// IOException</span>\n</code></pre>","children":[{"content":"This code compiles but throws an exception on line 46 with the message <code>Stream closed</code>.<br>\nWhile it is possible to write to the resource before the try-&#xad;with-&#xad;resources statement, it is<br>\nnot afterward.","children":[],"payload":{"tag":"li","lines":"280,284"}}],"payload":{"tag":"li","lines":"272,284"}}],"payload":{"tag":"li","lines":"270,284"}}],"payload":{"tag":"li","lines":"225,284"}}],"payload":{"tag":"h1","lines":"224,225"}}]},{"initialExpandLevel":2})</script>
</body>
</html>
