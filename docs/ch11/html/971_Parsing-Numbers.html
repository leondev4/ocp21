<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"","children":[{"content":"<strong>Parsing Numbers</strong>","children":[{"content":"We convert it from a <code>String</code> to a structured object or<br>\nprimitive value, using the <code>NumberFormat.parse()</code><br>\nmethod; and takes the locale into consideration.","children":[{"content":"The <code>parse()</code> method, declares a checked exception<br>\n<code>ParseException</code> that <em>must be handled or declared</em>","children":[],"payload":{"tag":"li","lines":"9,11"}}],"payload":{"tag":"li","lines":"6,11"}},{"content":"\n<pre data-lines=\"11,18\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> en = <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-property\">US</span>);\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(en.<span class=\"hljs-title function_\">parse</span>(s)); <span class=\"hljs-comment\">// 40.45</span>\n\n<span class=\"hljs-keyword\">var</span> fr = <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-property\">FRANCE</span>);\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(fr.<span class=\"hljs-title function_\">parse</span>(s)); <span class=\"hljs-comment\">// 40</span>\n</code></pre>","children":[{"content":"In the United States, a dot (<code>.</code>) is part of a number, and the number is<br>\nparsed as you might expect. France does not use a decimal point to<br>\nseparate numbers. Java parses it as a formatting character, and it<br>\nstops looking at the rest of the number.","children":[],"payload":{"tag":"li","lines":"18,22"}}],"payload":{"tag":"li","lines":"11,22"}},{"content":"\n<pre data-lines=\"22,30\"><code class=\"language-js\"><span class=\"hljs-title class_\">String</span> s = <span class=\"hljs-string\">&quot;40a45&quot;</span>;\n<span class=\"hljs-keyword\">var</span> en = <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-property\">US</span>);\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(en.<span class=\"hljs-title function_\">parse</span>(s)); <span class=\"hljs-comment\">//40</span>\n\n<span class=\"hljs-keyword\">var</span> fr = <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-property\">FRANCE</span>);\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(fr.<span class=\"hljs-title function_\">parse</span>(s)); <span class=\"hljs-comment\">//40</span>\n</code></pre>","children":[{"content":"\n<pre data-lines=\"30,39\"><code class=\"language-js\"><span class=\"hljs-title class_\">String</span> s = <span class=\"hljs-string\">&quot;a4045&quot;</span>;\n<span class=\"hljs-comment\">//both throw ParseException</span>\n<span class=\"hljs-keyword\">var</span> en = <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-property\">US</span>);\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(en.<span class=\"hljs-title function_\">parse</span>(s));  \n\n<span class=\"hljs-keyword\">var</span> fr = <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-property\">FRANCE</span>);\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(fr.<span class=\"hljs-title function_\">parse</span>(s)); \n</code></pre>","children":[],"payload":{"tag":"li","lines":"30,39"}}],"payload":{"tag":"li","lines":"22,39"}},{"content":"The <code>parse()</code> method is also used for parsing currency.<pre data-lines=\"40,46\"><code class=\"language-js\"><span class=\"hljs-title class_\">String</span> income = <span class=\"hljs-string\">&quot;&#x24;92,807.99&quot;</span>;\n<span class=\"hljs-keyword\">var</span> cf = <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getCurrencyInstance</span>();\ndouble value = (<span class=\"hljs-title class_\">Double</span>)cf.<span class=\"hljs-title function_\">parse</span>(income);\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(value); <span class=\"hljs-comment\">// 92807.99</span>\n</code></pre>","children":[{"content":"The currency string <code>&quot;&#x24;92,807.99&quot;</code> contains a dollar sign and a<br>\ncomma. The <code>parse</code> method strips out the characters and converts<br>\nthe value to a number. The return value of <code>parse</code> is a <code>Number</code><br>\nobject. So it can be cast to its appropriate data type. The <code>Number</code><br>\nis cast to a <code>Double</code> and then automatically unboxed into a <code>double</code>.","children":[],"payload":{"tag":"li","lines":"46,51"}}],"payload":{"tag":"li","lines":"39,51"}}],"payload":{"tag":"h1","lines":"5,6"}},{"content":"<strong>Formatting with <code>CompactNumberFormat</code></strong>","children":[{"content":"The second class that inherits <code>NumberFormat</code><br>\n(the first is <code>DecimalFormat</code>) that you need to<br>\nknow for the exam is <code>CompactNumberFormat</code>.","children":[{"content":"It is designed to be used in places<br>\nwhere print space may be limited.","children":[],"payload":{"tag":"li","lines":"55,57"}}],"payload":{"tag":"li","lines":"52,57"}},{"content":"Rules for <code>CompactNumberFormat</code>:","children":[{"content":"First it determines the highest range for the<br>\nnumber, such as thousand (<code>K</code>), million (<code>M</code>),<br>\nbillion (<code>B</code>), or trillion (<code>T</code>).","children":[],"payload":{"tag":"li","lines":"58,61"}},{"content":"It then returns up to the first three digits of that<br>\nrange, rounding the last digit as needed.","children":[],"payload":{"tag":"li","lines":"61,63"}},{"content":"Finally, it prints an identifier. If <code>SHORT</code> is used,<br>\na symbol is returned. If <code>LONG</code> is used, a space<br>\nfollowed by a word is returned.","children":[],"payload":{"tag":"li","lines":"63,66"}}],"payload":{"tag":"li","lines":"57,66"}},{"content":"\n<pre data-lines=\"66,77\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> formatters = <span class=\"hljs-title class_\">Stream</span>.<span class=\"hljs-title function_\">of</span>(\n  <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getCompactNumberInstance</span>(),\n  <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getCompactNumberInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">getDefault</span>(), <span class=\"hljs-title class_\">Style</span>.<span class=\"hljs-property\">SHORT</span>),\n  <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getCompactNumberInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">getDefault</span>(), <span class=\"hljs-title class_\">Style</span>.<span class=\"hljs-property\">LONG</span>),\n  <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getCompactNumberInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-property\">GERMAN</span>, <span class=\"hljs-title class_\">Style</span>.<span class=\"hljs-property\">SHORT</span>),\n  <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getCompactNumberInstance</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-property\">GERMAN</span>, <span class=\"hljs-title class_\">Style</span>.<span class=\"hljs-property\">LONG</span>),\n  <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getNumberInstance</span>());\n\nformatters.<span class=\"hljs-title function_\">map</span>(s -&gt;s.<span class=\"hljs-title function_\">format</span>(<span class=\"hljs-number\">7_123_456</span>)).<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>::println);\n</code></pre>","children":[{"content":"The first two lines are the same. If you don&#x2019;t specify a<br>\nstyle, <code>SHORT</code> is used by default, similarly for <code>Locale</code>.","children":[],"payload":{"tag":"li","lines":"77,79"}},{"content":"When you run it in <code>en_US</code>.<pre data-lines=\"80,90\"><code data-lines=\"80,90\"><span class=\"hljs-attribute\">7M</span>\n<span class=\"hljs-attribute\">7M</span>\n<span class=\"hljs-attribute\">7</span> million\n\n<span class=\"hljs-attribute\">77Mio</span>.\n<span class=\"hljs-attribute\">Millionen</span>\n\n<span class=\"hljs-attribute\">7</span>,<span class=\"hljs-number\">123</span>,<span class=\"hljs-number\">456</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"79,90"}}],"payload":{"tag":"li","lines":"66,90"}},{"content":"\n<pre data-lines=\"90,93\"><code data-lines=\"90,93\">formatters.map(s -&#xad;&gt; s.format(<span class=\"hljs-number\">314</span>_900_000)).<span class=\"hljs-keyword\">forEach</span>(<span class=\"hljs-keyword\">System</span>.<span class=\"hljs-keyword\">out</span>::println);\n</code></pre>","children":[{"content":"When you run it in <code>en_US</code>.<pre data-lines=\"94,104\"><code data-lines=\"94,104\"><span class=\"hljs-attribute\">315M</span>\n<span class=\"hljs-attribute\">315M</span>\n<span class=\"hljs-attribute\">315</span> million\n\n<span class=\"hljs-attribute\">315315Mio</span>.\n<span class=\"hljs-attribute\">Millionen</span>\n\n<span class=\"hljs-attribute\">314</span>,<span class=\"hljs-number\">900</span>,<span class=\"hljs-number\">000</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"93,104"}}],"payload":{"tag":"li","lines":"90,104"}},{"content":"<code>CompactNumberFormat</code> can also be used for parsing,<br>\nalthough not always in the way you might expect!","children":[{"content":"\n<pre data-lines=\"106,116\"><code class=\"language-js\"><span class=\"hljs-number\">20</span>: <span class=\"hljs-keyword\">var</span> locale = <span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-string\">&quot;en&quot;</span>, <span class=\"hljs-string\">&quot;US&quot;</span>);\n<span class=\"hljs-number\">21</span>: <span class=\"hljs-keyword\">var</span> compact = <span class=\"hljs-title class_\">NumberFormat</span>.<span class=\"hljs-title function_\">getCompactNumberInstance</span>(\n<span class=\"hljs-number\">22</span>:   locale, <span class=\"hljs-title class_\">Style</span>.<span class=\"hljs-property\">SHORT</span>);\n<span class=\"hljs-number\">23</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(compact.<span class=\"hljs-title function_\">format</span>(<span class=\"hljs-number\">1_000_000</span>)); <span class=\"hljs-comment\">// 1M</span>\n<span class=\"hljs-number\">24</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(compact.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-string\">&quot;1M&quot;</span>));       <span class=\"hljs-comment\">// 1000000</span>\n<span class=\"hljs-number\">25</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(compact.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-string\">&quot;1000000&quot;</span>));  <span class=\"hljs-comment\">// 1000000</span>\n<span class=\"hljs-number\">26</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(compact.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-string\">&quot;1,000,000&quot;</span>));<span class=\"hljs-comment\">// 1</span>\n<span class=\"hljs-number\">27</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(compact.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-string\">&quot;&#x24;1000000&quot;</span>)); <span class=\"hljs-comment\">// ParseException</span>\n</code></pre>","children":[{"content":"Lines 20-23 should look familiar. They print a million using the<br>\nshort format of <code>1M</code>. Lines 24 and 25 shows that the format is<br>\nflexible in taking the original or shortened format. Line 26<br>\nmight surprise you as Java stops at the initial punctuation and<br>\nonly prints <code>1</code>. By contrast, line 27 is a road too far. Java doesn&#x2019;t<br>\nknow what to do with the <code>&#x24;</code> and throws a <code>ParseException</code>.","children":[],"payload":{"tag":"li","lines":"116,122"}}],"payload":{"tag":"li","lines":"106,122"}}],"payload":{"tag":"li","lines":"104,122"}}],"payload":{"tag":"h1","lines":"51,52"}}]},{"initialExpandLevel":2})</script>
</body>
</html>
