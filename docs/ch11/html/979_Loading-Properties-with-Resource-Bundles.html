<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"","children":[{"content":"<strong>Loading Properties with<br> Resource Bundles</strong>","children":[{"content":"A <em>resource bundle</em> contains the locale-&#xad;specific objects to be used by a program. It is like<br>\na map with keys and values. The resource bundle is commonly stored in a properties file.<br>\nA <em>properties file</em> is a text file in a specific format with key/value pairs.","children":[],"payload":{"tag":"li","lines":"6,9"}},{"content":"Resource bundles","children":[{"content":"Will let us easily translate our application to multiple<br>\nlocales or even support multiple locales at once","children":[],"payload":{"tag":"li","lines":"10,12"}},{"content":"Each line representing a different key/value. The key and<br>\nvalue are separated by an equal sign (<code>=</code>) or colon (<code>:</code>).","children":[],"payload":{"tag":"li","lines":"12,14"}},{"content":"<strong>If we don&#x2019;t have a country-specific resource<br>\nbundle, Java will use a language-&#xad;specific one.</strong>","children":[],"payload":{"tag":"li","lines":"14,16"}}],"payload":{"tag":"li","lines":"9,16"}}],"payload":{"tag":"h1","lines":"5,6"}},{"content":"<strong>Creating a Resource Bundle</strong>","children":[{"content":"\n<pre data-lines=\"17,26\"><code data-lines=\"17,26\">//Zoo_en.properties\n<span class=\"hljs-attribute\">hello</span><span class=\"hljs-operator\">=</span>Hello\n<span class=\"hljs-attribute\">open</span><span class=\"hljs-operator\">=</span>The zoo is open\n\n//Zoo_fr.properties\n<span class=\"hljs-attribute\">hello</span><span class=\"hljs-operator\">=</span>Bonjour\n<span class=\"hljs-attribute\">open</span><span class=\"hljs-operator\">=</span>Le zoo est ouvert\n</code></pre>","children":[{"content":"The filenames match the name of our resource bundle,<br>\n<code>Zoo</code>. They are then followed by an underscore (<code>_</code>),<br>\ntarget locale, and <code>.properties</code> file extension.","children":[],"payload":{"tag":"li","lines":"26,29"}}],"payload":{"tag":"li","lines":"17,29"}},{"content":"\n<pre data-lines=\"29,42\"><code class=\"language-js\"><span class=\"hljs-number\">10</span>: public <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">printWelcomeMessage</span>(<span class=\"hljs-params\">Locale locale</span>) {\n<span class=\"hljs-number\">11</span>:   <span class=\"hljs-keyword\">var</span> rb = <span class=\"hljs-title class_\">ResourceBundle</span>.<span class=\"hljs-title function_\">getBundle</span>(<span class=\"hljs-string\">&quot;Zoo&quot;</span>, locale);\n<span class=\"hljs-number\">12</span>:   <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(rb.<span class=\"hljs-title function_\">getString</span>(<span class=\"hljs-string\">&quot;hello&quot;</span>)\n<span class=\"hljs-number\">13</span>:   + <span class=\"hljs-string\">&quot;, &quot;</span> + rb.<span class=\"hljs-title function_\">getString</span>(<span class=\"hljs-string\">&quot;open&quot;</span>));\n<span class=\"hljs-number\">14</span>: }\n<span class=\"hljs-number\">15</span>: public <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">String</span>[] args</span>) {\n<span class=\"hljs-number\">16</span>:   <span class=\"hljs-keyword\">var</span> us =<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-string\">&quot;en&quot;</span>, <span class=\"hljs-string\">&quot;US&quot;</span>);<span class=\"hljs-comment\">//fall Zoo_en</span>\n<span class=\"hljs-number\">17</span>:   <span class=\"hljs-keyword\">var</span> france =<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-string\">&quot;fr&quot;</span>, <span class=\"hljs-string\">&quot;FR&quot;</span>);<span class=\"hljs-comment\">//fall Zoo_fr</span>\n<span class=\"hljs-number\">18</span>:   <span class=\"hljs-title function_\">printWelcomeMessage</span>(us); <span class=\"hljs-comment\">// Hello, The zoo is open</span>\n<span class=\"hljs-number\">19</span>:   <span class=\"hljs-title function_\">printWelcomeMessage</span>(france); <span class=\"hljs-comment\">// Bonjour, Le zoo est ouvert</span>\n<span class=\"hljs-number\">20</span>: }\n</code></pre>","children":[],"payload":{"tag":"li","lines":"29,42"}},{"content":"\n<p data-lines=\"42,45\">Since a resource bundle contains key/value pairs, you can even loop<br>\nthrough them to list all of the pairs. The <code>ResourceBundle</code> class provides<br>\na <code>keySet()</code> method to get a set of all keys.</p>\n<pre data-lines=\"46,53\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> us = <span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-string\">&quot;en&quot;</span>, <span class=\"hljs-string\">&quot;US&quot;</span>);\n<span class=\"hljs-title class_\">ResourceBundle</span> rb = <span class=\"hljs-title class_\">ResourceBundle</span>.<span class=\"hljs-title function_\">getBundle</span>(<span class=\"hljs-string\">&quot;Zoo&quot;</span>, us);\nrb.<span class=\"hljs-title function_\">keySet</span>().<span class=\"hljs-title function_\">stream</span>()\n  .<span class=\"hljs-title function_\">map</span>(k -&#xad;&gt; k + <span class=\"hljs-string\">&quot;: &quot;</span> + rb.<span class=\"hljs-title function_\">getString</span>(k))\n  .<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>::println);\n</code></pre>","children":[{"content":"This example goes through all of the keys. It maps each key to a<br>\n<code>String</code> with both the key and the value before printing everything.<pre data-lines=\"55,59\"><code data-lines=\"55,59\">hello: Hello\n<span class=\"hljs-keyword\">open</span>: The zoo <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">open</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"53,59"}}],"payload":{"tag":"li","lines":"42,59"}}],"payload":{"tag":"h1","lines":"16,17"}},{"content":"<strong>Picking a Resource Bundle (file <br>with .properties extension)</strong>","children":[{"content":"\n<p data-lines=\"60,61\">Two methods for obtaining a resource bundle</p>","children":[{"content":"\n<pre data-lines=\"61,64\"><code data-lines=\"61,64\">ResourceBundle.getBundle<span class=\"hljs-punctuation\">(</span><span class=\"hljs-string\">&quot;name&quot;</span><span class=\"hljs-punctuation\">)</span><span class=\"hljs-punctuation\">;</span><span class=\"hljs-comment\">//uses default locale</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"61,64"}},{"content":"\n<pre data-lines=\"64,67\"><code data-lines=\"64,67\">ResourceBundle.getBundle(<span class=\"hljs-string\">&quot;name&quot;</span>, <span class=\"hljs-built_in\">locale</span>);\n</code></pre>","children":[],"payload":{"tag":"li","lines":"64,67"}}],"payload":{"tag":"li","lines":"60,67"}},{"content":"\n<p data-lines=\"67,69\">Picking a resource bundle for <code>fr_FR</code><br>\nwith default locale <code>en_US</code></p>","children":[{"content":"<code>Zoo_fr_FR.properties</code>","children":[{"content":"Requested locale","children":[],"payload":{"tag":"li","lines":"70,71"}}],"payload":{"tag":"li","lines":"69,71"}},{"content":"<code>Zoo_fr.properties</code>","children":[{"content":"Language we requested with no country","children":[],"payload":{"tag":"li","lines":"72,73"}}],"payload":{"tag":"li","lines":"71,73"}},{"content":"<code>Zoo_en_US.properties</code>","children":[{"content":"Default locale","children":[],"payload":{"tag":"li","lines":"74,75"}}],"payload":{"tag":"li","lines":"73,75"}},{"content":"<code>Zoo_en.properties</code>","children":[{"content":"Default locale&#x2019;s language with no country","children":[],"payload":{"tag":"li","lines":"76,77"}}],"payload":{"tag":"li","lines":"75,77"}},{"content":"<code>Zoo.properties</code>","children":[{"content":"No locale at all&#x2014;&#xad;default bundle","children":[],"payload":{"tag":"li","lines":"78,79"}}],"payload":{"tag":"li","lines":"77,79"}},{"content":"If still not found, throw<br>\n<code>MissingResource&#xad;Exception</code>","children":[{"content":"No locale or default bundle available","children":[],"payload":{"tag":"li","lines":"81,82"}}],"payload":{"tag":"li","lines":"79,82"}},{"content":"Or learn these steps:","children":[{"content":"1. Look for the resource bundle for the requested locale,<br>\nfollowed by the one for the default locale.","children":[],"payload":{"tag":"li","lines":"83,85","listIndex":1}},{"content":"2. For each locale, check the language/country, followed<br>\nby just the language.","children":[],"payload":{"tag":"li","lines":"85,87","listIndex":2}},{"content":"3. Use the default resource bundle if no matching locale<br>\ncan be found.","children":[],"payload":{"tag":"li","lines":"87,89","listIndex":3}}],"payload":{"tag":"li","lines":"82,89"}}],"payload":{"tag":"li","lines":"67,89"}},{"content":"\n<p data-lines=\"89,91\">What is the maximum number of files that Java would need to consider in order to<br>\nfind the appropriate resource bundle with the following code?</p>\n<pre data-lines=\"92,96\"><code data-lines=\"92,96\"><span class=\"hljs-built_in\">Locale</span>.setDefault(<span class=\"hljs-built_in\">Locale</span>.of(<span class=\"hljs-string\">&quot;hi&quot;</span>));\nResourceBundle rb = ResourceBundle.getBundle(<span class=\"hljs-string\">&quot;Zoo&quot;</span>,<span class=\"hljs-built_in\">Locale</span>.of(<span class=\"hljs-string\">&quot;en&quot;</span>));\n</code></pre>\n<p data-lines=\"96,103\">The answer is three. They are listed here:<br>\n1. <code>Zoo_en.properties</code><br>\n2. <code>Zoo_hi.properties</code><br>\n3. <code>Zoo.properties</code><br>\nThe requested locale is <code>en</code>, so we start with that. Since the en locale does not contain<br>\na country, we move on to the default locale, <code>hi</code>. Again, there&#x2019;s no country, so we end<br>\nwith the default bundle.</p>","children":[],"payload":{"tag":"li","lines":"89,103"}}],"payload":{"tag":"h1","lines":"59,60"}},{"content":"<strong>Selecting Resource Bundle keys</strong>","children":[{"content":"Java isn&#x2019;t required to get all of the keys from the same resource bundle. It can get<br>\nthem from any parent of the matching resource bundle. A parent resource bundle<br>\nin the hierarchy just removes components of the name until it gets to the top.","children":[],"payload":{"tag":"li","lines":"104,107"}},{"content":"Matching resource bundle:<pre data-lines=\"108,111\"><code data-lines=\"108,111\"><span class=\"hljs-attribute\">Zoo_fr_FR</span>\n</code></pre>","children":[{"content":"Properties files keys can come from:<pre data-lines=\"112,117\"><code data-lines=\"112,117\">Zoo_fr_FR.<span class=\"hljs-keyword\">properties</span>\nZoo_fr.<span class=\"hljs-keyword\">properties</span>\nZoo.<span class=\"hljs-keyword\">properties</span>\n</code></pre>","children":[{"content":"<strong>Java does not use default locale when picks a key</strong>","children":[],"payload":{"tag":"li","lines":"117,118"}}],"payload":{"tag":"li","lines":"111,118"}}],"payload":{"tag":"li","lines":"107,118"}},{"content":"Assume the requested locale is <code>fr_FR</code> and the default is <code>en_US</code>. The JVM will provide<br>\ndata from <code>en_US</code> only if there is no matching <code>fr_FR</code> or <code>fr</code> resource bundle. If it finds a<br>\n<code>fr_FR</code> or <code>fr</code> resource bundle, then only those bundles, along with the default bundle,<br>\nwill be used.","children":[],"payload":{"tag":"li","lines":"118,122"}},{"content":"\n<pre data-lines=\"122,136\"><code class=\"language-js\"><span class=\"hljs-comment\">//Zoo.properties</span>\nname=<span class=\"hljs-title class_\">VancouverZoo</span>\n\n<span class=\"hljs-comment\">//Zoo_en.properties</span>\nhello=<span class=\"hljs-title class_\">Hello</span>\nopen=is open\n\n<span class=\"hljs-comment\">//Zoo_en_US.properties</span>\nname=<span class=\"hljs-title class_\">The</span> <span class=\"hljs-title class_\">Zoo</span>\n\n<span class=\"hljs-comment\">//Zoo_en_CA.properties</span>\nvisitors=<span class=\"hljs-title class_\">Canada</span> visitors\n</code></pre>","children":[{"content":"\n<pre data-lines=\"136,148\"><code class=\"language-js\"><span class=\"hljs-number\">11</span>: <span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">setDefault</span>(<span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-string\">&quot;en&quot;</span>, <span class=\"hljs-string\">&quot;US&quot;</span>));\n<span class=\"hljs-number\">12</span>: <span class=\"hljs-title class_\">Locale</span> locale = <span class=\"hljs-title class_\">Locale</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-string\">&quot;en&quot;</span>, <span class=\"hljs-string\">&quot;CA&quot;</span>);\n<span class=\"hljs-number\">13</span>: <span class=\"hljs-title class_\">ResourceBundle</span> rb =<span class=\"hljs-title class_\">ResourceBundle</span>.<span class=\"hljs-title function_\">getBundle</span>(<span class=\"hljs-string\">&quot;Zoo&quot;</span>, locale);\n<span class=\"hljs-number\">14</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(rb.<span class=\"hljs-title function_\">getString</span>(<span class=\"hljs-string\">&quot;hello&quot;</span>));\n<span class=\"hljs-number\">15</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">&quot;. &quot;</span>);\n<span class=\"hljs-number\">16</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(rb.<span class=\"hljs-title function_\">getString</span>(<span class=\"hljs-string\">&quot;name&quot;</span>));\n<span class=\"hljs-number\">17</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">&quot; &quot;</span>);\n<span class=\"hljs-number\">18</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(rb.<span class=\"hljs-title function_\">getString</span>(<span class=\"hljs-string\">&quot;open&quot;</span>));\n<span class=\"hljs-number\">19</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">&quot; &quot;</span>);\n<span class=\"hljs-number\">20</span>: <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">print</span>(rb.<span class=\"hljs-title function_\">getString</span>(<span class=\"hljs-string\">&quot;visitors&quot;</span>));\n</code></pre>","children":[{"content":"The program prints the following:<br>\n<strong>Hello. Vancouver Zoo is open Canada visitors</strong>","children":[],"payload":{"tag":"li","lines":"148,150"}},{"content":"The default locale is <code>en_US</code>, and the requested locale is <code>en_CA</code>. First, Java goes through<br>\nthe available resource bundles to find a match. It finds one right away with<br>\n<code>Zoo_en_CA.properties</code>. This means the default locale of <code>en_US</code>_ is irrelevant. Line 14<br>\ndoesn&#x2019;t find a match for the key <code>hello</code> in <code>Zoo_en_CA.properties</code>, so it goes up the<br>\nhierarchy to <code>Zoo_en.properties</code>._ Line 16 doesn&#x2019;t find a match for <code>name</code> in either of<br>\nthe first two properties files, so it has to go all the way to the top of the hierarchy to<br>\n<code>Zoo.properties</code>. Line 18 has the same experience as line 14, using <code>Zoo_en.properties</code>.<br>\nFinally, line 20 has an easier job of it and finds a matching key in <code>Zoo_en_CA.properties</code>.","children":[],"payload":{"tag":"li","lines":"150,158"}},{"content":"<strong>In this example, only three properties files were used: <code>Zoo_en_CA.properties</code>,<br>\n<code>Zoo_en.properties</code>, and <code>Zoo.properties</code>.</strong>","children":[],"payload":{"tag":"li","lines":"158,160"}}],"payload":{"tag":"li","lines":"136,160"}}],"payload":{"tag":"li","lines":"122,160"}},{"content":"If you attempting to call <code>rb.getString(&quot;close&quot;)</code> in the previous<br>\nprogram results in a <code>MissingResourceException</code> at runtime.","children":[],"payload":{"tag":"li","lines":"160,162"}}],"payload":{"tag":"h1","lines":"103,104"}}]},{"initialExpandLevel":2})</script>
</body>
</html>
