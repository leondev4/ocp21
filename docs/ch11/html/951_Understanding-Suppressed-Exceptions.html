<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"<strong>Understanding Suppressed Exceptions</strong>","children":[{"content":"We already know that resources are closed before any <code>catch</code> or <code>finally</code><br>\nblocks coded by the programmer are executed.","children":[],"payload":{"tag":"li","lines":"6,8"}},{"content":"\n<pre data-lines=\"8,22\"><code class=\"language-js\"><span class=\"hljs-number\">1</span>: public <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JammedTurkeyCage</span> implements <span class=\"hljs-title class_\">AutoCloseable</span> {\n<span class=\"hljs-number\">2</span>:   public <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">close</span>() throws <span class=\"hljs-title class_\">IllegalStateException</span> { <span class=\"hljs-comment\">//throws is not necessary</span>\n<span class=\"hljs-number\">3</span>:     <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">IllegalStateException</span>(<span class=\"hljs-string\">&quot;Cage door does not close&quot;</span>);\n<span class=\"hljs-number\">4</span>: }\n<span class=\"hljs-number\">5</span>:   public <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">String</span>[] args</span>) {\n<span class=\"hljs-number\">6</span>:     <span class=\"hljs-title function_\">try</span> (<span class=\"hljs-title class_\">JammedTurkeyCage</span> t = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JammedTurkeyCage</span>()) {\n<span class=\"hljs-number\">7</span>:       <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Put turkeys in&quot;</span>);\n<span class=\"hljs-number\">8</span>:     } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">IllegalStateException</span> e) {\n<span class=\"hljs-number\">9</span>:       <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Caught: &quot;</span> + e.<span class=\"hljs-title function_\">getMessage</span>());\n<span class=\"hljs-number\">10</span>:    }\n<span class=\"hljs-number\">11</span>:  }\n<span class=\"hljs-number\">12</span>: }\n</code></pre>","children":[{"content":"The <code>close()</code> method is automatically called by try-&#xad;with-&#xad;resources. It throws an<br>\nexception, which is caught by our <code>catch</code> block and prints the following:<pre data-lines=\"24,28\"><code data-lines=\"24,28\">Put turkeys <span class=\"hljs-keyword\">in</span>\nCaught: Cage door <span class=\"hljs-keyword\">does</span> <span class=\"hljs-keyword\">not</span> close\n</code></pre>","children":[],"payload":{"tag":"li","lines":"22,28"}}],"payload":{"tag":"li","lines":"8,28"}},{"content":"What happens if the <code>try</code> block also throws an exception? When multiple exceptions are thrown,<br>\n<strong>all but the first are called suppressed exceptions</strong>. The idea is that Java treats the first exception<br>\nas the primary one and adds on any that come up while automatically closing.","children":[],"payload":{"tag":"li","lines":"28,31"}},{"content":"\n<pre data-lines=\"31,42\"><code class=\"language-js\"><span class=\"hljs-number\">5</span>: public <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">String</span>[] args</span>) {\n<span class=\"hljs-number\">6</span>:    <span class=\"hljs-title function_\">try</span> (<span class=\"hljs-title class_\">JammedTurkeyCage</span> t = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JammedTurkeyCage</span>()) {\n<span class=\"hljs-number\">7</span>:        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">IllegalStateException</span>(<span class=\"hljs-string\">&quot;Turkeys ran off&quot;</span>);\n<span class=\"hljs-number\">8</span>:    } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">IllegalStateException</span> e) {\n<span class=\"hljs-number\">9</span>:        <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Caught: &quot;</span> + e.<span class=\"hljs-title function_\">getMessage</span>());\n<span class=\"hljs-number\">10</span>:       <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-title class_\">Throwable</span> <span class=\"hljs-attr\">t</span>: e.<span class=\"hljs-title function_\">getSuppressed</span>())\n<span class=\"hljs-number\">11</span>:         <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;Suppressed: &quot;</span>+t.<span class=\"hljs-title function_\">getMessage</span>());\n<span class=\"hljs-number\">12</span>:    }\n<span class=\"hljs-number\">13</span>:  }\n</code></pre>","children":[{"content":"\n<p data-lines=\"42,45\">Line 7 throws the primary exception. At this point, the <code>try</code> clause ends, and Java automatically calls<br>\nthe <code>close()</code> method. Line 3 of <code>JammedTurkeyCage</code> throws an <code>IllegalStateException</code>, which is added<br>\nas a suppressed exception. Then line 8 catches the primary exception.</p>\n<p data-lines=\"46,47\">The program prints the following:</p>\n<pre data-lines=\"47,51\"><code data-lines=\"47,51\"><span class=\"hljs-symbol\">Caught:</span> Turkeys ran <span class=\"hljs-keyword\">off</span>\n<span class=\"hljs-symbol\">Suppressed:</span> Cage door does <span class=\"hljs-built_in\">not</span> close\n</code></pre>","children":[],"payload":{"tag":"li","lines":"42,51"}}],"payload":{"tag":"li","lines":"31,51"}},{"content":"<code>catch</code> block looks for matches on the primary exception","children":[{"content":"\n<pre data-lines=\"52,61\"><code class=\"language-js\"><span class=\"hljs-number\">3</span>: public <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">String</span>[] args</span>) {\n<span class=\"hljs-number\">4</span>:   <span class=\"hljs-title function_\">try</span>(<span class=\"hljs-params\">JammedTurkeyCage t = <span class=\"hljs-keyword\">new</span> JammedTurkeyCage()</span>){\n<span class=\"hljs-number\">5</span>:     <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>(<span class=\"hljs-string\">&quot;Turkeys ran off&quot;</span>);\n<span class=\"hljs-number\">6</span>:   }<span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-title class_\">IllegalStateException</span> e){\n<span class=\"hljs-number\">7</span>:     <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">&quot;caught: &quot;</span> + e.<span class=\"hljs-title function_\">getMessage</span>());\n<span class=\"hljs-number\">8</span>:  }\n<span class=\"hljs-number\">9</span>:}\n</code></pre>","children":[{"content":"\n<pre data-lines=\"61,69\"><code data-lines=\"61,69\">Exception <span class=\"hljs-keyword\">in</span> thread <span class=\"hljs-string\">&quot;main&quot;</span> java<span class=\"hljs-selector-class\">.lang</span><span class=\"hljs-selector-class\">.RuntimeException</span>: Turkeys ran off\n  at JammedTurkeyCage<span class=\"hljs-selector-class\">.main</span>(JammedTurkeyCage<span class=\"hljs-selector-class\">.java</span>:<span class=\"hljs-number\">7</span>)\n    Suppressed: java<span class=\"hljs-selector-class\">.lang</span><span class=\"hljs-selector-class\">.IllegalStateException</span>:\n      Cage door does not close\n        at JammedTurkeyCage<span class=\"hljs-selector-class\">.close</span>(JammedTurkeyCage<span class=\"hljs-selector-class\">.java</span>:<span class=\"hljs-number\">3</span>)\n        at JammedTurkeyCage<span class=\"hljs-selector-class\">.main</span>(JammedTurkeyCage<span class=\"hljs-selector-class\">.java</span>:<span class=\"hljs-number\">8</span>)\n</code></pre>\n<p data-lines=\"70,72\">Java remembers the suppressed exceptions that go with a primary exception even if<br>\nwe don&#x2019;t handle them in the code.</p>","children":[],"payload":{"tag":"li","lines":"61,72"}}],"payload":{"tag":"li","lines":"52,72"}}],"payload":{"tag":"li","lines":"51,72"}},{"content":"Suppressed exceptions apply only to exceptions thrown in the <code>try</code> clause.<br>\nIf the <code>finally</code> block throws an exception, the suppressed exceptions are lost.","children":[{"content":"\n<pre data-lines=\"74,83\"><code class=\"language-js\"><span class=\"hljs-number\">3</span>: public <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">String</span>[] args</span>) {\n<span class=\"hljs-number\">4</span>:   <span class=\"hljs-title function_\">try</span> (<span class=\"hljs-title class_\">JammedTurkeyCage</span> t = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JammedTurkeyCage</span>()) {\n<span class=\"hljs-number\">5</span>:     <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">IllegalStateException</span>(<span class=\"hljs-string\">&quot;Turkeys ran off&quot;</span>);\n<span class=\"hljs-number\">6</span>:   } <span class=\"hljs-keyword\">finally</span> {\n<span class=\"hljs-number\">7</span>:     <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RuntimeException</span>(<span class=\"hljs-string\">&quot;and we couldn&apos;t find them&quot;</span>);\n<span class=\"hljs-number\">8</span>:   }\n<span class=\"hljs-number\">9</span>: }\n</code></pre>","children":[{"content":"\n<pre data-lines=\"83,88\"><code data-lines=\"83,88\"><span class=\"hljs-keyword\">Exception</span> <span class=\"hljs-keyword\">in</span> thread <span class=\"hljs-string\">&quot;main&quot;</span> java.lang.RuntimeException:\n  <span class=\"hljs-keyword\">and</span> we couldn<span class=\"hljs-symbol\">&apos;t</span> find them\n    <span class=\"hljs-keyword\">at</span> JammedTurkeyCage.main(JammedTurkeyCage.java:<span class=\"hljs-number\">9</span>)\n</code></pre>","children":[],"payload":{"tag":"li","lines":"83,88"}}],"payload":{"tag":"li","lines":"74,88"}}],"payload":{"tag":"li","lines":"72,88"}}],"payload":{"tag":"h1","lines":"5,6"}},{"initialExpandLevel":1})</script>
</body>
</html>
