<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"","children":[{"content":"<strong>Using Optional with Primitive Streams</strong>","children":[{"content":"\n<p data-lines=\"6,7\">You can calculate the average in one line.</p>","children":[{"content":"\n<pre data-lines=\"7,11\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> stream = <span class=\"hljs-title class_\">IntStream</span>.<span class=\"hljs-title function_\">rangeClosed</span>(<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">10</span>);\n<span class=\"hljs-title class_\">OptionalDouble</span> optional = stream.<span class=\"hljs-title function_\">average</span>();\n</code></pre>","children":[{"content":"The return type is not the <code>Optional</code>. Why not just use <code>Optional&lt;Double&gt;</code>? The<br>\ndifference is that <code>OptionalDouble</code> is for a primitive and <code>Optional&lt;Double&gt;</code><br>\nis for the <code>Double</code> wrapper class. Working with the primitive optional class<br>\nlooks similar to working with the <code>Optional</code> class itself.<pre data-lines=\"15,20\"><code class=\"language-js\">optional.<span class=\"hljs-title function_\">ifPresent</span>(<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>::println);                  <span class=\"hljs-comment\">// 5.5</span>\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(optional.<span class=\"hljs-title function_\">getAsDouble</span>());               <span class=\"hljs-comment\">// 5.5</span>\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(optional.<span class=\"hljs-title function_\">orElseGet</span>(() -&gt; <span class=\"hljs-title class_\">Double</span>.<span class=\"hljs-property\">NaN</span>)); <span class=\"hljs-comment\">// 5.5</span>\n</code></pre>","children":[{"content":"The only noticeable difference is that we called <code>getAsDouble()</code> rather than<br>\n<code>get()</code>. This makes it clear that we are working with a primitive. Also,<br>\n<code>orElseGet()</code> takes a <code>DoubleSupplier</code> instead of a Supplier.","children":[],"payload":{"tag":"li","lines":"20,23"}}],"payload":{"tag":"li","lines":"11,23"}}],"payload":{"tag":"li","lines":"7,23"}}],"payload":{"tag":"li","lines":"6,23"}},{"content":"\n<p data-lines=\"23,24\"><strong>TABLE 10.8</strong> Optional types for primitives</p>\n<table data-lines=\"24,31\">\n<thead data-lines=\"24,25\">\n<tr data-lines=\"24,25\">\n<th></th>\n<th><code>OptionalDouble</code></th>\n<th><code>OptionalInt</code></th>\n<th><code>OptionalLong</code></th>\n</tr>\n</thead>\n<tbody data-lines=\"26,31\">\n<tr data-lines=\"26,27\">\n<td>Getting as primitive</td>\n<td><code>getAsDouble()</code></td>\n<td><code>getAsInt()</code></td>\n<td><code>getAsLong()</code></td>\n</tr>\n<tr data-lines=\"27,28\">\n<td><code>orElseGet()</code> parameter type</td>\n<td><code>DoubleSupplier</code></td>\n<td><code>IntSupplier</code></td>\n<td><code>LongSupplier</code></td>\n</tr>\n<tr data-lines=\"28,29\">\n<td>Return type of <code>max()</code> <br> and <code>min()</code></td>\n<td><code>OptionalDouble</code></td>\n<td><code>OptionalInt</code></td>\n<td><code>OptionalLong</code></td>\n</tr>\n<tr data-lines=\"29,30\">\n<td>Return type of <code>sum()</code></td>\n<td><code>double</code></td>\n<td><code>int</code></td>\n<td><code>long</code></td>\n</tr>\n<tr data-lines=\"30,31\">\n<td><code>Return type of average()</code></td>\n<td><code>OptionalDouble</code></td>\n<td><code>OptionalDouble</code></td>\n<td><code>OptionalDouble</code></td>\n</tr>\n</tbody>\n</table>","children":[{"content":"Summary<br>\nClass<pre data-lines=\"33,36\"><code data-lines=\"33,36\"><span class=\"hljs-attribute\">OptionalX</span>\n</code></pre>","children":[{"content":"Getting as primitive","children":[{"content":"\n<pre data-lines=\"37,40\"><code data-lines=\"37,40\"><span class=\"hljs-function\"><span class=\"hljs-title\">getAsX</span><span class=\"hljs-params\">()</span></span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"37,40"}}],"payload":{"tag":"li","lines":"36,40"}},{"content":"<code>orElseGet()</code> parameter type","children":[{"content":"\n<pre data-lines=\"41,44\"><code data-lines=\"41,44\"><span class=\"hljs-attribute\">XSupplier</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"41,44"}}],"payload":{"tag":"li","lines":"40,44"}},{"content":"Return type of <code>max()</code> <br> and <code>min()</code>","children":[{"content":"\n<pre data-lines=\"45,48\"><code data-lines=\"45,48\"><span class=\"hljs-attribute\">OptionalX</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"45,48"}}],"payload":{"tag":"li","lines":"44,48"}},{"content":"Return type of <code>sum()</code>","children":[{"content":"\n<pre data-lines=\"49,52\"><code data-lines=\"49,52\"><span class=\"hljs-attribute\">x</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"49,52"}}],"payload":{"tag":"li","lines":"48,52"}},{"content":"Return type of <code>average()</code>","children":[{"content":"\n<pre data-lines=\"53,56\"><code data-lines=\"53,56\"><span class=\"hljs-attribute\">OptionalDouble</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"53,58"}}],"payload":{"tag":"li","lines":"52,58"}}],"payload":{"tag":"li","lines":"31,58"}}],"payload":{"tag":"li","lines":"23,58"}},{"content":"\n<p data-lines=\"58,60\">Let&#x2019;s try an example to make<br>\nsure that you understand this:</p>","children":[{"content":"\n<pre data-lines=\"60,76\"><code class=\"language-js\"><span class=\"hljs-title class_\">LongStream</span> longs = <span class=\"hljs-title class_\">LongStream</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">10</span>);\n\nlong sum = longs.<span class=\"hljs-title function_\">sum</span>();\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(sum);    <span class=\"hljs-comment\">// 15</span>\n\nlongs = <span class=\"hljs-title class_\">LongStream</span>.<span class=\"hljs-title function_\">of</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">10</span>);\n\n<span class=\"hljs-keyword\">var</span> ints = longs.<span class=\"hljs-title function_\">mapToInt</span>(x -&gt; (int)x);\n\n<span class=\"hljs-title class_\">OptionalDouble</span> avg = ints.<span class=\"hljs-title function_\">average</span>();\n<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(avg.<span class=\"hljs-title function_\">getAsDouble</span>());<span class=\"hljs-comment\">//7.5</span>\n\n<span class=\"hljs-title class_\">DoubleStream</span> doubles = <span class=\"hljs-title class_\">DoubleStream</span>.<span class=\"hljs-title function_\">generate</span>(() -&gt; <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-property\">PI</span>);\n<span class=\"hljs-title class_\">OptionalDouble</span> min = doubles.<span class=\"hljs-title function_\">min</span>(); <span class=\"hljs-comment\">// runs infinitely</span>\n</code></pre>","children":[{"content":"To use <code>collect</code> method, the stream must be <code>Stream&lt;T&gt;</code>","children":[],"payload":{"tag":"li","lines":"76,77"}}],"payload":{"tag":"li","lines":"60,77"}}],"payload":{"tag":"li","lines":"58,77"}}],"payload":{"tag":"h1","lines":"5,6"}},{"content":"<strong>Summarizing Statistics</strong>","children":[{"content":"We want a method that take an <code>IntStream</code> and return a range. The range<br>\nis the minimum value subtracted from the maximum value. Both <code>min()</code><br>\nand <code>max()</code> are terminal operations, which means that they use up the<br>\nstream when they are run. We can&#x2019;t run two terminal operations against<br>\nthe same stream. Luckily, this is a common problem, and the primitive<br>\nstreams solve it for us with summary statistics.","children":[{"content":"\n<pre data-lines=\"84,93\"><code class=\"language-js\">private <span class=\"hljs-keyword\">static</span> int <span class=\"hljs-title function_\">range</span>(<span class=\"hljs-params\">IntStream ints</span>) {\n  <span class=\"hljs-title class_\">IntSummaryStatistics</span> stats =            \n      ints.<span class=\"hljs-title function_\">summaryStatistics</span>();\n  <span class=\"hljs-keyword\">if</span> (stats.<span class=\"hljs-title function_\">getCount</span>() == <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span>  \n    <span class=\"hljs-title class_\">RuntimeException</span>();\n  <span class=\"hljs-keyword\">return</span> stats.<span class=\"hljs-title function_\">getMax</span>()-&#xad;stats.<span class=\"hljs-title function_\">getMin</span>();\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"84,93"}}],"payload":{"tag":"li","lines":"78,93"}},{"content":"Summary statistics<br>\ninclude the following:","children":[{"content":"<strong><code>getCount():</code></strong>","children":[{"content":"Returns a <code>long</code> representing the number of values.","children":[],"payload":{"tag":"li","lines":"96,97"}}],"payload":{"tag":"li","lines":"95,97"}},{"content":"<strong><code>getAverage():</code></strong>","children":[{"content":"Returns a <code>double</code> representing the average. If the<br>\nstream is empty, returns <code>0</code>.","children":[],"payload":{"tag":"li","lines":"98,100"}}],"payload":{"tag":"li","lines":"97,100"}},{"content":"<strong><code>getSum()</code>:</strong>","children":[{"content":"Returns the sum as a <code>double</code> for <code>DoubleSummaryStream</code> and<br>\n<code>long</code> for <code>IntSummaryStream</code> and <code>LongSummaryStream</code>.","children":[],"payload":{"tag":"li","lines":"101,103"}}],"payload":{"tag":"li","lines":"100,103"}},{"content":"<strong><code>getMin():</code></strong>","children":[{"content":"Returns the smallest number (minimum) as a <code>double</code> , <code>int</code>,<br>\nor <code>long</code>, depending on the type of the stream. If the stream<br>\nis empty, returns the largest numeric value based on the type.","children":[],"payload":{"tag":"li","lines":"104,107"}}],"payload":{"tag":"li","lines":"103,107"}},{"content":"<strong><code>getMax():</code></strong>","children":[{"content":"Returns the largest number (maximum) as a <code>double</code>, <code>int</code>,<br>\nor <code>long</code> depending on the type of the stream. If the stream<br>\nis empty, returns the smallest numeric value based on the type.","children":[],"payload":{"tag":"li","lines":"108,111"}}],"payload":{"tag":"li","lines":"107,111"}}],"payload":{"tag":"li","lines":"93,111"}}],"payload":{"tag":"h1","lines":"77,78"}}]},{"initialExpandLevel":2})</script>
</body>
</html>
