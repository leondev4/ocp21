<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"<strong>Working with Variables<br> in Lambdas</strong>","children":[{"content":"Parameter list","children":[{"content":"The type of parameters is optional. Additionally, <code>var</code><br>\ncan be used in place of the specific type. That means<br>\nthat all three of these statements are interchangeable","children":[{"content":"\n<pre data-lines=\"10,13\"><code data-lines=\"10,13\">Predicate&lt;<span class=\"hljs-built_in\">String</span>&gt; p = x -&gt; <span class=\"hljs-literal\">true</span>;\n</code></pre>","children":[{"content":"You can add the <code>final</code> modifier or an annotation","children":[{"content":"\n<pre data-lines=\"14,19\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">counts</span><span class=\"hljs-params\">(List&lt;Integer&gt; list)</span> {\n  list.sort((<span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">var</span> x, <span class=\"hljs-meta\">@Deprecated</span> <span class=\"hljs-keyword\">var</span> y) -&gt; x.compareTo(y));\n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"14,19"}}],"payload":{"tag":"li","lines":"13,19"}}],"payload":{"tag":"li","lines":"10,19"}},{"content":"\n<pre data-lines=\"19,22\"><code data-lines=\"19,22\">Predicate&lt;<span class=\"hljs-built_in\">String</span>&gt; <span class=\"hljs-function\"><span class=\"hljs-title\">p</span>= <span class=\"hljs-params\">(<span class=\"hljs-keyword\">var</span> x)</span> -&gt;</span> <span class=\"hljs-literal\">true</span>;\n</code></pre>","children":[{"content":"A lambda infers the types from<br>\nthe surrounding context.","children":[{"content":"Can you figure out the type of <code>x</code>?<pre data-lines=\"25,33\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">whatAmI</span><span class=\"hljs-params\">()</span> {\n  consume((<span class=\"hljs-keyword\">var</span> x) -&#xad;&gt; System.out.print(x), <span class=\"hljs-number\">123</span>);\n}\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">consume</span><span class=\"hljs-params\">(Consumer&lt;Integer&gt; c, <span class=\"hljs-type\">int</span> num)</span> {\n  c.accept(num);\n}\n</code></pre>","children":[{"content":"<code>x</code> is <code>Integer</code><br>\nThe <code>whatAmI()</code> method creates a lambda to be passed to the<br>\n<code>consume()</code> method. Since the <code>consume()</code> method expects an<br>\n<code>Integer</code> as the generic, we know that is what the inferred type<br>\nof <code>x</code> will be.","children":[],"payload":{"tag":"li","lines":"33,38"}}],"payload":{"tag":"li","lines":"24,38"}},{"content":"What do you think the type of <code>x</code> is here?<pre data-lines=\"39,44\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">counts</span><span class=\"hljs-params\">(List&lt;Integer&gt; list)</span> {\n  list.sort((<span class=\"hljs-keyword\">var</span> x, <span class=\"hljs-keyword\">var</span> y) -&gt; x.compareTo(y));\n}\n</code></pre>","children":[{"content":"<code>x</code> is <code>Integer</code>.<br>\nSince we are sorting a list, we can use the type of the<br>\nlist to determine the type of the lambda parameter.","children":[],"payload":{"tag":"li","lines":"44,47"}}],"payload":{"tag":"li","lines":"38,47"}}],"payload":{"tag":"li","lines":"22,47"}}],"payload":{"tag":"li","lines":"19,47"}},{"content":"\n<pre data-lines=\"47,50\"><code data-lines=\"47,50\">Predicate&lt;<span class=\"hljs-type\">String</span>&gt; p= (<span class=\"hljs-type\">String</span> x) -&#xad;&gt;<span class=\"hljs-literal\">true</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"47,50"}}],"payload":{"tag":"li","lines":"7,50"}},{"content":"You have three formats for specifying parameter types within a<br>\nlambda: without types, with types, and with <code>var</code>. The compiler<br>\nrequires all parameters in the lambda to use the same format.","children":[{"content":"\n<pre data-lines=\"53,59\"><code class=\"language-java\"><span class=\"hljs-number\">5</span>: (<span class=\"hljs-keyword\">var</span> x, y) -&#xad;&gt; <span class=\"hljs-string\">&quot;Hello&quot;</span> <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">6</span>: (<span class=\"hljs-keyword\">var</span> x, Integer y) -&#xad;&gt; <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">7</span>: (String x, <span class=\"hljs-keyword\">var</span> y, Integer z) -&#xad;&gt; <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">8</span>: (Integer x, y) -&#xad;&gt; <span class=\"hljs-string\">&quot;goodbye&quot;</span> <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n</code></pre>\n<p data-lines=\"60,63\">Lines 5 needs to remove <code>var</code> from <code>x</code> or add it to <code>y</code>. Next, lines 6 and 7<br>\nneed to use the <code>type</code> or <code>var</code> consistently. Finally, line 8 needs to remove<br>\n<code>Integer</code> from <code>x</code> or add a type to <code>y</code>.</p>","children":[],"payload":{"tag":"li","lines":"53,63"}}],"payload":{"tag":"li","lines":"50,63"}}],"payload":{"tag":"li","lines":"6,63"}},{"content":"Local variables declared <br> inside the lambda body","children":[{"content":"You can define a block. That block can have anything that is valid<br>\nin a normal Java block, including local variable declarations.","children":[{"content":"\n<pre data-lines=\"66,69\"><code class=\"language-java\">(a, b) -&#xad;&gt; { <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">c</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">5</span>; }\n</code></pre>","children":[{"content":"It creates a local variable named <code>c</code> that is scoped to the lambda block.","children":[],"payload":{"tag":"li","lines":"69,70"}}],"payload":{"tag":"li","lines":"66,70"}},{"content":"\n<pre data-lines=\"70,73\"><code data-lines=\"70,73\">(a, b) -&#xad;&gt; { <span class=\"hljs-built_in\">int</span> a=<span class=\"hljs-number\">0</span>; <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">5</span>; } <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n</code></pre>","children":[{"content":"Java doesn&#x2019;t let you create a local variable with the<br>\nsame name as one already declared in that scope.","children":[],"payload":{"tag":"li","lines":"73,75"}}],"payload":{"tag":"li","lines":"70,75"}},{"content":"How many syntax errors do you see in this method?<pre data-lines=\"76,85\"><code class=\"language-java\"><span class=\"hljs-number\">11</span>: <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">variables</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> a)</span>{\n<span class=\"hljs-number\">12</span>:    <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">b</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-number\">13</span>:    Predicate&lt;Integer&gt; p1 = a-&gt;{\n<span class=\"hljs-number\">14</span>:      <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">b</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-number\">15</span>:      <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">c</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-number\">16</span>:      <span class=\"hljs-keyword\">return</span> b == c;}\n<span class=\"hljs-number\">17</span>: }\n</code></pre>","children":[{"content":"There are three syntax errors. The first is on line 13. The variable <code>a</code><br>\nwas already used in this scope as a method parameter, so it cannot<br>\nbe reused. The next syntax error comes on line 14, where the code<br>\nattempts to redeclare local variable <code>b</code>. The third syntax error is that<br>\nthe variable <code>p1</code> is missing a semicolon at the end on line 16.","children":[],"payload":{"tag":"li","lines":"85,90"}}],"payload":{"tag":"li","lines":"75,90"}}],"payload":{"tag":"li","lines":"64,90"}}],"payload":{"tag":"li","lines":"63,90"}},{"content":"Variables referenced from<br>\nthe lambda body","children":[{"content":"Lambda can access an instance variable, method parameter, or local variable under certain<br>\nconditions. Instance variables and class variables are always allowed. <strong>The only thing<br>\nlambdas cannot access are variables that are not <code>final</code> or effectively final.</strong>","children":[{"content":"\n<pre data-lines=\"95,107\"><code data-lines=\"95,107\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Crow</span> {\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">String</span> <span class=\"hljs-type\">color</span>;\n  <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">int</span> age;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">caw</span>(<span class=\"hljs-built_in\">String</span> name) {\n    <span class=\"hljs-built_in\">String</span> volume = <span class=\"hljs-string\">&quot;loudly&quot;</span>;\n    Consumer&lt;<span class=\"hljs-built_in\">String</span>&gt; consumer = s -&#xad;&gt;\n      System.<span class=\"hljs-property\">out</span>.<span class=\"hljs-property\">println</span>(name + <span class=\"hljs-string\">&quot; says &quot;</span> + volume + <span class=\"hljs-string\">&quot; that she is &quot;</span> + \n            <span class=\"hljs-type\">color</span>+<span class=\"hljs-string\">&quot; age &quot;</span>+ age+<span class=\"hljs-string\">&quot; &quot;</span> + s);\n  }\n}\n</code></pre>","children":[{"content":"Instance variable: <code>color</code><br>\nClass variable: <code>age</code><br>\nLambda parameter:<code>s</code><br>\nLocal variable: <code>volume</code><br>\nMethod parameter: <code>name</code>","children":[],"payload":{"tag":"li","lines":"107,112"}}],"payload":{"tag":"li","lines":"95,112"}},{"content":"\n<pre data-lines=\"112,127\"><code class=\"language-java\"><span class=\"hljs-number\">2</span>: <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Crow</span>{\n<span class=\"hljs-number\">3</span>:   <span class=\"hljs-keyword\">private</span> String color;\n<span class=\"hljs-number\">4</span>:   <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">caw</span><span class=\"hljs-params\">(String name)</span>{\n<span class=\"hljs-number\">5</span>:     <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">volume</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;loudly&quot;</span>;\n<span class=\"hljs-number\">6</span>:     name = <span class=\"hljs-string\">&quot;Caty&quot;</span>;\n<span class=\"hljs-number\">7</span>:     color = <span class=\"hljs-string\">&quot;black&quot;</span>;\n<span class=\"hljs-number\">8</span>:`\n<span class=\"hljs-number\">9</span>:     Consumer&lt;String&gt; consumer = s -&#xad;&gt;\n<span class=\"hljs-number\">10</span>:       System.out.println(name + <span class=\"hljs-string\">&quot; says &quot;</span>  <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">11</span>:          + volume + <span class=\"hljs-string\">&quot; that she is &quot;</span> + color);  <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">12</span>:    volume = <span class=\"hljs-string\">&quot;softly&quot;</span>;\n<span class=\"hljs-number\">13</span>:   }\n<span class=\"hljs-number\">14</span>: }\n</code></pre>","children":[{"content":"If the variables <code>name</code> and <code>volume</code> were final, the compilation<br>\nerrors would be on lines 6 and 12; in the assignments","children":[],"payload":{"tag":"li","lines":"127,129"}},{"content":"The method parameter <code>name</code> is not effectively final because it is<br>\nset on line 6 (lambda is not allowed to use the variable, line 10).","children":[],"payload":{"tag":"li","lines":"129,131"}},{"content":"The variable <code>volume</code> is not effectively final since it is updated<br>\non line 12 (lambda is not allowed to use the variable, line 11).","children":[],"payload":{"tag":"li","lines":"131,133"}}],"payload":{"tag":"li","lines":"112,133"}}],"payload":{"tag":"li","lines":"92,133"}},{"content":"Always allowed","children":[{"content":"Instance variable","children":[],"payload":{"tag":"li","lines":"134,135"}},{"content":"Class or Static variable","children":[],"payload":{"tag":"li","lines":"135,136"}},{"content":"Lambda parameter","children":[],"payload":{"tag":"li","lines":"136,137"}}],"payload":{"tag":"li","lines":"133,137"}},{"content":"Allowed if are <code>final</code> or<br>\neffectively final","children":[{"content":"Local variable","children":[],"payload":{"tag":"li","lines":"139,140"}},{"content":"Method parameter","children":[],"payload":{"tag":"li","lines":"140,141"}}],"payload":{"tag":"li","lines":"137,141"}}],"payload":{"tag":"li","lines":"90,141"}}],"payload":{"tag":"h1","lines":"5,6"}},{"initialExpandLevel":1})</script>
</body>
</html>
