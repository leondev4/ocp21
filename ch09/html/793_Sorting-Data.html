<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"<strong>Sorting Data</strong>","children":[{"content":"Remember 7Up, when working with a <code>String</code>, numbers sort before<br>\nletters, and uppercase letters sort before lowercase letters.","children":[{"content":"You can also sort objects that you create yourself. Java provides an interface called<br>\n<code>Comparable</code>. If your class implements <code>Comparable</code>, it can be used in data structures<br>\nthat require comparison. There is also an interface called <code>Comparator</code>, which is used<br>\nto specify that you want to use a different order than the object itself provides.","children":[{"content":"In fact, you&#x2019;ve seen many <code>Comparable</code> classes in this book include <code>String</code>,<br>\n<code>StringBuilder</code>, <code>BigDecimal</code>, <code>BigInteger</code> and the primitive wrapper classes.","children":[{"content":"<code>Collections.sort(Collection&lt;T&gt;)</code>, returns <code>void</code>because the method<br>\nparameter is what gets sorted; it must implement <code>Comparable</code>,<br>\nif  does not, compile error occurs.","children":[],"payload":{"tag":"li","lines":"15,18"}}],"payload":{"tag":"li","lines":"13,18"}}],"payload":{"tag":"li","lines":"9,18"}}],"payload":{"tag":"li","lines":"7,18"}},{"content":"\n<h4 data-lines=\"18,19\">Creating a <code>Comparable</code> Class</h4>","children":[{"content":"The <code>Comparable</code> interface has only one method.","children":[{"content":"\n<pre data-lines=\"20,25\"><code data-lines=\"20,25\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-symbol\">Comparable</span>&lt;<span class=\"hljs-symbol\">T</span>&gt; {\n  <span class=\"hljs-built_in\">int</span> compareTo(T o);\n}\n</code></pre>","children":[{"content":"The generic <code>T</code> lets you implement this method and specify the<br>\ntype of your object. This lets you avoid a cast when implementing<br>\n<code>compareTo()</code>. Any object can be <code>Comparable</code>.","children":[{"content":"For example, we have ducks and we want to sort them by name. First,<br>\nwe create a <code>record</code> that implements <code>Comparable&lt;Duck&gt;</code>, and then<br>\nwe implement the <code>compareTo()</code> method.<pre data-lines=\"31,38\"><code data-lines=\"31,38\"><span class=\"hljs-built_in\">public</span> <span class=\"hljs-type\">record</span> Duck(String <span class=\"hljs-type\">name</span>) implements Comparable&lt;Duck&gt; {\n  <span class=\"hljs-built_in\">public</span> <span class=\"hljs-type\">int</span> compareTo(Duck d) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">name</span>.compareTo(d.name); // Sorts ascendingly <span class=\"hljs-keyword\">by</span> <span class=\"hljs-type\">name</span>\n  }\n}\n</code></pre>","children":[{"content":"We can sort the ducks as follows:<pre data-lines=\"39,46\"><code data-lines=\"39,46\"><span class=\"hljs-number\">11</span>: var ducks = new ArrayList&lt;Duck&gt;();\n<span class=\"hljs-number\">12</span>: ducks.<span class=\"hljs-built_in\">add</span>(new <span class=\"hljs-built_in\">Duck</span>(<span class=\"hljs-string\">&quot;Quack&quot;</span>));\n<span class=\"hljs-number\">13</span>: ducks.<span class=\"hljs-built_in\">add</span>(new <span class=\"hljs-built_in\">Duck</span>(<span class=\"hljs-string\">&quot;Puddles&quot;</span>));\n<span class=\"hljs-number\">14</span>: Collections.<span class=\"hljs-built_in\">sort</span>(ducks); // sort by name\n<span class=\"hljs-number\">15</span>: System.out.<span class=\"hljs-built_in\">print</span>(ducks); // <span class=\"hljs-selector-attr\">[Duck[name=Puddles]</span>,Duck<span class=\"hljs-selector-attr\">[name=Quack]</span>]\n</code></pre>","children":[{"content":"If we didn&#x2019;t implement the <code>Comparable</code> interface, all we have is a<br>\nmethod named <code>compareTo()</code>, and line 14 would not compile.<br>\nFinally, the <code>Duck</code> class implements <code>compareTo()</code>. Since <code>Duck</code> is<br>\ncomparing objects of type <code>String</code> and the <code>String</code> class already has<br>\na <code>compareTo()</code> method, it can just delegate.","children":[],"payload":{"tag":"li","lines":"46,51"}}],"payload":{"tag":"li","lines":"38,51"}}],"payload":{"tag":"li","lines":"28,51"}}],"payload":{"tag":"li","lines":"25,51"}}],"payload":{"tag":"li","lines":"20,51"}}],"payload":{"tag":"li","lines":"19,51"}}],"payload":{"tag":"li","lines":"18,51"}},{"content":"<code>compareTo</code> or<br>\n<code>compare</code>returns","children":[{"content":"Negative number when the current object is smaller than the argument","children":[],"payload":{"tag":"li","lines":"53,54"}},{"content":"zero (<code>0</code>)  when the current object is equivalent to the agument","children":[],"payload":{"tag":"li","lines":"54,55"}},{"content":"Positive number when the current object is larger than the argument","children":[],"payload":{"tag":"li","lines":"55,56"}}],"payload":{"tag":"li","lines":"51,56"}},{"content":"Let&#x2019;s look at an implementation of <code>compareTo()</code> that compares numbers<br>\ninstead of <code>String</code> objects:<pre data-lines=\"58,66\"><code data-lines=\"58,66\"><span class=\"hljs-number\">2</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> record <span class=\"hljs-title\">ZooDuck</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id, <span class=\"hljs-type\">String</span> name)</span> implements \n                            Comparable&lt;ZooDuck&gt; </span>{\n<span class=\"hljs-number\">3</span>:   <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title\">compareTo</span><span class=\"hljs-params\">(ZooDuck d)</span> </span>{\n<span class=\"hljs-number\">4</span>:     <span class=\"hljs-keyword\">return</span> id - d.id; <span class=\"hljs-comment\">// Sorts ascendingly by id</span>\n<span class=\"hljs-number\">5</span>:   }\n<span class=\"hljs-number\">6</span>: }\n</code></pre>","children":[{"content":"Line 4 shows one way to compare two <code>int</code> values. We could have used<br>\n<code>Integer.compare(id, d.id)</code>, but we wanted to show you how to create<br>\nyour own. Be sure you can recognize both approaches. Remember that<br>\n<code>id - d.id</code> sorts in ascending order, and <code>d.id - id</code> sorts in descending<br>\norder.","children":[{"content":"Let&#x2019;s try this new method out in some code:<pre data-lines=\"72,79\"><code data-lines=\"72,79\"><span class=\"hljs-number\">21</span>: var d1 = new <span class=\"hljs-built_in\">ZooDuck</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-string\">&quot;Daffy&quot;</span>);\n<span class=\"hljs-number\">22</span>: var d2 = new <span class=\"hljs-built_in\">ZooDuck</span>(<span class=\"hljs-number\">7</span>, <span class=\"hljs-string\">&quot;Donald&quot;</span>);\n<span class=\"hljs-number\">23</span>: System.out.<span class=\"hljs-built_in\">println</span>(d1.<span class=\"hljs-built_in\">compareTo</span>(d2)); // -<span class=\"hljs-number\">2</span>\n<span class=\"hljs-number\">24</span>: System.out.<span class=\"hljs-built_in\">println</span>(d1.<span class=\"hljs-built_in\">compareTo</span>(d1)); // <span class=\"hljs-number\">0</span>\n<span class=\"hljs-number\">25</span>: System.out.<span class=\"hljs-built_in\">println</span>(d2.<span class=\"hljs-built_in\">compareTo</span>(d1)); // <span class=\"hljs-number\">2</span>\n</code></pre>","children":[{"content":"Line 23 compares a smaller <code>id</code> to a larger one, and therefore it prints<br>\na negative number. Line 24 compares animals with the same <code>id</code>, and<br>\ntherefore it prints <code>0</code>. Line 25 compares a larger <code>id</code> to a smaller one,<br>\nand therefore it returns a positive number.","children":[{"content":"<strong>Casting the <code>compareTo()</code> Argument</strong><pre data-lines=\"84,92\"><code data-lines=\"84,92\"><span class=\"hljs-keyword\">public</span> record <span class=\"hljs-title class_\">LegacyDuck</span>(<span class=\"hljs-title class_\">String</span> name) <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Comparable</span> {\n  <span class=\"hljs-keyword\">public</span> int <span class=\"hljs-title function_\">compareTo</span>(<span class=\"hljs-params\"><span class=\"hljs-title class_\">Object</span> obj</span>) {\n    <span class=\"hljs-keyword\">if</span>(obj <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">LegacyDuck</span> d)\n      <span class=\"hljs-keyword\">return</span> name.<span class=\"hljs-title function_\">compareTo</span>(d.<span class=\"hljs-property\">name</span>);\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">UnsupportedOperationException</span>(<span class=\"hljs-string\">&quot;Not a duck&quot;</span>);\n  } }\n</code></pre>\nSince we don&#x2019;t specify a generic type for <code>Comparable</code>, Java assumes that<br>\nwe want an <code>Object</code>.","children":[{"content":"<strong>Checking for <code>null</code></strong><pre data-lines=\"95,107\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">record</span> <span class=\"hljs-title class_\">MissingDuck</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Comparable</span>&lt;MissingDuck&gt; {\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compareTo</span><span class=\"hljs-params\">(MissingDuck quack)</span> {\n    <span class=\"hljs-keyword\">if</span> (quack == <span class=\"hljs-literal\">null</span>)\n      <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">IllegalArgumentException</span>(<span class=\"hljs-string\">&quot;Poorly formed duck!&quot;</span>);\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">this</span>.name == <span class=\"hljs-literal\">null</span> &amp;&amp; quack.name == <span class=\"hljs-literal\">null</span>)\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">this</span>.name == <span class=\"hljs-literal\">null</span>) <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span>;\n    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (quack.name == <span class=\"hljs-literal\">null</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>;\n    <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">return</span> name.compareTo(quack.name);\n  } }\n</code></pre>\nThis method throws an exception if it is passed a <code>null</code> <code>MissingDuck</code> object. What about the<br>\nordering? If the <code>name</code> of a duck is <code>null</code>, it&#x2019;s sorted first.","children":[{"content":"<strong>Keeping <code>compareTo()</code> and <code>equals()</code> Consistent</strong><br>\nIf you write a class that implements <code>Comparable</code>, you introduce new<br>\nbusiness logic for determining equality. The <code>compareTo()</code> method<br>\nreturns <code>0</code> if two objects are equal, while your <code>equals()</code> method returns<br>\n<code>true</code> if two objects are equal. A natural ordering that uses <code>compareTo()</code><br>\nis said to be consistent with equals if, and only if, <code>x.equals(y)</code> is <code>true</code><br>\nwhenever <code>x.compareTo(y)</code> equals <code>0</code>.<br>\nSimilarly, <code>x.equals(y)</code> must be <code>false</code> whenever <code>x.compareTo(y)</code> is not <code>0</code>.","children":[],"payload":{"tag":"li","lines":"109,117"}}],"payload":{"tag":"li","lines":"94,117"}}],"payload":{"tag":"li","lines":"83,117"}}],"payload":{"tag":"li","lines":"79,117"}}],"payload":{"tag":"li","lines":"71,117"}}],"payload":{"tag":"li","lines":"66,117"}}],"payload":{"tag":"li","lines":"56,117"}},{"content":"<strong>Comparing Data with a <code>Comparator</code></strong><br>\nSometimes you want to sort an object that did not implement<br>\n<code>Comparable</code>, or you want to sort objects in different ways.<pre data-lines=\"120,129\"><code data-lines=\"120,129\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> record <span class=\"hljs-title\">Duck</span><span class=\"hljs-params\">(<span class=\"hljs-type\">String</span> name, <span class=\"hljs-type\">int</span> weight)</span> implements\n              Comparable&lt;Duck&gt; </span>{\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title\">compareTo</span><span class=\"hljs-params\">(Duck d)</span> </span>{\n    <span class=\"hljs-keyword\">return</span> name.<span class=\"hljs-built_in\">compareTo</span>(d.name);\n  }\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-title\">toString</span><span class=\"hljs-params\">()</span> </span>{ <span class=\"hljs-keyword\">return</span> name; }\n}\n</code></pre>","children":[{"content":"We now have the following:<pre data-lines=\"130,144\"><code data-lines=\"130,144\"><span class=\"hljs-number\">11</span>: Comparator&lt;Duck&gt; byWeight = new Comparator&lt;&gt;() {\n<span class=\"hljs-number\">12</span>:   public int <span class=\"hljs-built_in\">compare</span>(Duck d1, Duck d2) {\n<span class=\"hljs-number\">13</span>:     return d1.<span class=\"hljs-built_in\">weight</span>() - d2.<span class=\"hljs-built_in\">weight</span>();\n<span class=\"hljs-number\">14</span>:   }\n<span class=\"hljs-number\">15</span>: };\n<span class=\"hljs-number\">16</span>: var ducks = new ArrayList&lt;Duck&gt;();\n<span class=\"hljs-number\">17</span>: ducks.<span class=\"hljs-built_in\">add</span>(new <span class=\"hljs-built_in\">Duck</span>(<span class=\"hljs-string\">&quot;Quack&quot;</span>, <span class=\"hljs-number\">7</span>));\n<span class=\"hljs-number\">18</span>: ducks.<span class=\"hljs-built_in\">add</span>(new <span class=\"hljs-built_in\">Duck</span>(<span class=\"hljs-string\">&quot;Puddles&quot;</span>, <span class=\"hljs-number\">10</span>));\n<span class=\"hljs-number\">19</span>: Collections.<span class=\"hljs-built_in\">sort</span>(ducks);\n<span class=\"hljs-number\">20</span>: System.out.<span class=\"hljs-built_in\">println</span>(ducks); // <span class=\"hljs-selector-attr\">[Puddles, Quack]</span>\n<span class=\"hljs-number\">21</span>: Collections.<span class=\"hljs-built_in\">sort</span>(ducks, byWeight);\n<span class=\"hljs-number\">22</span>: System.out.<span class=\"hljs-built_in\">println</span>(ducks); // <span class=\"hljs-selector-attr\">[Quack, Puddles]</span>\n</code></pre>","children":[{"content":"The <code>Duck</code> class itself can define only one <code>compareTo()</code> method. In this<br>\ncase, <code>name</code> was chosen. If we want to sort by something else, we have<br>\nto define that sort order outside the <code>compareTo()</code> method using a<br>\nseparate class or lambda expression.<br>\nLines 11&#x2013;15 show how to define a <code>Comparator</code> using an anonymous<br>\nclass. On lines 19&#x2013;22, we sort with the class&#x2019;s internal <code>Comparator</code> and<br>\nthen with the separate <code>Comparator</code> to see the difference in output.","children":[{"content":"<code>Comparator</code> is a functional interface. We can rewrite the <code>Comparator</code> on<br>\nlines 11&#x2013;15 using a lambda expression, as shown here:<pre data-lines=\"153,156\"><code data-lines=\"153,156\"><span class=\"hljs-symbol\">Comparator</span>&lt;Duck&gt; byWeight = (<span class=\"hljs-built_in\">d1</span>, <span class=\"hljs-built_in\">d2</span>) -&gt; <span class=\"hljs-built_in\">d1</span>.weight()-<span class=\"hljs-built_in\">d2</span>.weight()<span class=\"hljs-comment\">;</span>\n</code></pre>\nAlternatively, we can use a method reference and a helper method to<br>\nspecify that we want to sort by weight.<pre data-lines=\"158,161\"><code data-lines=\"158,161\">Comparator<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Duck</span>&gt;</span> byWeight = Comparator.comparing(Duck::weight);\n</code></pre>","children":[{"content":"<code>Comparator.comparing()</code> is a <code>static</code> interface method that creates a<br>\n<code>Comparator</code> given a lambda expression or method reference.","children":[{"content":"<strong>Comparing <code>Comparable</code> and <code>Comparator</code></strong><br>\n<strong>TABLE 9.8</strong> Comparison of Comparable and Comparator\n<table data-lines=\"165,172\">\n<thead data-lines=\"165,166\">\n<tr data-lines=\"165,166\">\n<th>Difference</th>\n<th><code>Comparable</code></th>\n<th><code>Comparator</code></th>\n</tr>\n</thead>\n<tbody data-lines=\"167,172\">\n<tr data-lines=\"167,168\">\n<td>Package name</td>\n<td><code>java.lang</code></td>\n<td><code>java.util</code></td>\n</tr>\n<tr data-lines=\"168,169\">\n<td>Interface must be implemented by class comparing?</td>\n<td>Yes</td>\n<td>No</td>\n</tr>\n<tr data-lines=\"169,170\">\n<td>Method name in interface</td>\n<td><code>compareTo()</code></td>\n<td><code>compare()</code></td>\n</tr>\n<tr data-lines=\"170,171\">\n<td>Number of parameters</td>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr data-lines=\"171,172\">\n<td>Common to declare using a lambda</td>\n<td>No</td>\n<td>Yes</td>\n</tr>\n</tbody>\n</table>","children":[{"content":"Do you see why this doesn&#x2019;t compile?<pre data-lines=\"173,180\"><code class=\"language-java\"><span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">byWeight</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Comparator</span>&lt;Duck&gt;() { <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">compareTo</span><span class=\"hljs-params\">(Duck d1, Duck d2)</span> {\n    <span class=\"hljs-keyword\">return</span> d1.getWeight()-d2.getWeight();\n  }\n};\n</code></pre>\nThe method name is wrong. A <code>Comparator</code> must implement a method<br>\nnamed <code>compare()</code>.","children":[],"payload":{"tag":"li","lines":"172,182"}}],"payload":{"tag":"li","lines":"163,182"}}],"payload":{"tag":"li","lines":"161,182"}}],"payload":{"tag":"li","lines":"151,182"}}],"payload":{"tag":"li","lines":"144,182"}}],"payload":{"tag":"li","lines":"129,182"}}],"payload":{"tag":"li","lines":"117,182"}},{"content":"<strong>Comparing Multiple Fields</strong><br>\nSort by species name. If two squirrels are from the same  species, we want to<br>\nsort the one that weighs the least first.<pre data-lines=\"185,189\"><code data-lines=\"185,189\"><span class=\"hljs-title\">Comparator&lt;Squirrel&gt; c = Comparator.comparing(Squirrel::</span>getSpecies)\n<span class=\"hljs-title\">  .thenComparingInt(Squirrel::</span>getWeight)<span class=\"hljs-comment\">;</span>\n</code></pre>","children":[{"content":"We can to sort in descending order by species.<pre data-lines=\"190,193\"><code data-lines=\"190,193\"><span class=\"hljs-built_in\">var</span> c = Comparator.comparing(Squirrel<span class=\"hljs-type\">::species</span>).reversed();\n</code></pre>","children":[{"content":"<strong>TABLE 9.9</strong> Helper <code>static</code> methods for building a <code>Comparator</code>\n<table data-lines=\"194,202\">\n<thead data-lines=\"194,195\">\n<tr data-lines=\"194,195\">\n<th>Method</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody data-lines=\"196,202\">\n<tr data-lines=\"196,197\">\n<td><code>comparing(function)</code></td>\n<td>Compare by results of function that returns any <code>Object</code><br> (or primitive autoboxed into <code>Object</code>) .</td>\n</tr>\n<tr data-lines=\"197,198\">\n<td><code>comparingDouble(function)</code></td>\n<td>Compare by results of function that returns <code>double</code></td>\n</tr>\n<tr data-lines=\"198,199\">\n<td><code>comparingInt(function)</code></td>\n<td>Compare by results of function that returns <code>int</code>.</td>\n</tr>\n<tr data-lines=\"199,200\">\n<td><code>comparingLong(function)</code></td>\n<td>Compare by results of function that returns <code>long</code>.</td>\n</tr>\n<tr data-lines=\"200,201\">\n<td><code>naturalOrder()</code></td>\n<td>Sort using order specified by the <code>Comparable</code><br> implementation on the object itself.</td>\n</tr>\n<tr data-lines=\"201,202\">\n<td><code>reverseOrder()</code></td>\n<td>Sort using reverse of order specified by <code>Comparable</code><br>implementation on the object itself.</td>\n</tr>\n</tbody>\n</table>","children":[{"content":"Methods that you can chain to a <code>Comparator</code> to further specify its behavior.<br>\n<strong>TABLE 9.10</strong> Helper default methods for building a <code>Comparator</code>\n<table data-lines=\"204,211\">\n<thead data-lines=\"204,205\">\n<tr data-lines=\"204,205\">\n<th>Method</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody data-lines=\"206,211\">\n<tr data-lines=\"206,207\">\n<td><code>reversed()</code></td>\n<td>Reverse order of chained <code>Comparator</code>.</td>\n</tr>\n<tr data-lines=\"207,208\">\n<td><code>thenComparing(function)</code></td>\n<td>If previous <code>Comparator</code> returns <code>0</code>, use this comparator<br>function that returns <code>Object</code> or can be autoboxed into one.<br>Otherwise, return result from previous <code>Comparator</code>.</td>\n</tr>\n<tr data-lines=\"208,209\">\n<td><code>thenComparingDouble(function)</code></td>\n<td>If previous Comparator returns <code>0</code>, use this comparator<br> function that returns double. Otherwise, return result from<br> previous <code>Comparator</code>.</td>\n</tr>\n<tr data-lines=\"209,210\">\n<td><code>thenComparingInt(function)</code></td>\n<td>If previous <code>Comparator</code> returns <code>0</code>, use this comparator<br>function that returns <code>int</code>. Otherwise, return result from<br>previous <code>Comparator</code>.</td>\n</tr>\n<tr data-lines=\"210,211\">\n<td><code>thenComparingLong(function)</code></td>\n<td>If previous <code>Comparator</code> returns <code>0</code>, use this comparator<br>function that returns <code>long</code>. Otherwise, return result from<br>previous <code>Comparator</code>.</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"li","lines":"202,211"}}],"payload":{"tag":"li","lines":"193,211"}}],"payload":{"tag":"li","lines":"189,211"}}],"payload":{"tag":"li","lines":"182,211"}},{"content":"<strong>Sorting and Searching</strong><br>\nThe <code>Collections.sort()</code> method uses the <code>compareTo()</code> method to sort.<br>\nIt expects the objects to be sorted to be <code>Comparable</code>.<pre data-lines=\"214,225\"><code class=\"language-java\"><span class=\"hljs-number\">2</span>: <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SortRabbits</span> {\n<span class=\"hljs-number\">3</span>:   <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">record</span> <span class=\"hljs-title class_\">Rabbit</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span> {}\n<span class=\"hljs-number\">4</span>:   <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n<span class=\"hljs-number\">5</span>:     List&lt;Rabbit&gt; rabbits = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();\n<span class=\"hljs-number\">6</span>:     rabbits.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Rabbit</span>(<span class=\"hljs-number\">3</span>));\n<span class=\"hljs-number\">7</span>:     rabbits.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Rabbit</span>(<span class=\"hljs-number\">1</span>));\n<span class=\"hljs-number\">8</span>:     Collections.sort(rabbits); <span class=\"hljs-comment\">// DOES NOT COMPILE</span>\n<span class=\"hljs-number\">9</span>:    }\n<span class=\"hljs-number\">10</span>: }\n</code></pre>","children":[{"content":"Java knows that the <code>Rabbit</code> record is not <code>Comparable</code>. It knows sorting will fail,<br>\nso it doesn&#x2019;t even let the code compile. You can fix this by passing a<br>\n<code>Comparator</code> to <code>sort()</code>. Remember that a <code>Comparator</code> is useful when you want<br>\nto specify sort order without using a <code>compareTo()</code> method.<pre data-lines=\"229,234\"><code data-lines=\"229,234\"><span class=\"hljs-number\">8</span>:    Comparator&lt;Rabbit&gt; c = (r1, r2) -&gt; r1.id - r2.id;\n<span class=\"hljs-number\">9</span>:    Collections.<span class=\"hljs-built_in\">sort</span>(rabbits, c);\n<span class=\"hljs-number\">10</span>:   System.out.<span class=\"hljs-built_in\">println</span>(rabbits); // <span class=\"hljs-selector-attr\">[Rabbit[id=1]</span>, Rabbit<span class=\"hljs-selector-attr\">[id=3]</span>]\n</code></pre>","children":[{"content":"Suppose you want to sort the rabbits in descending order. You could<br>\nchange the <code>Comparator</code> to <code>r2.id - r1.id</code>. Alternatively, you could reverse<br>\nthe contents of the list afterward:<pre data-lines=\"237,243\"><code data-lines=\"237,243\"><span class=\"hljs-number\">8</span>:  Comparator&lt;Rabbit&gt; c = (r1, r2) -&gt; r1.id - r2.id;\n<span class=\"hljs-number\">9</span>:  Collections.<span class=\"hljs-built_in\">sort</span>(rabbits, c);\n<span class=\"hljs-number\">10</span>: Collections.<span class=\"hljs-built_in\">reverse</span>(rabbits);\n<span class=\"hljs-number\">11</span>: System.out.<span class=\"hljs-built_in\">println</span>(rabbits); //<span class=\"hljs-selector-attr\">[Rabbit[id=3]</span>, Rabbit<span class=\"hljs-selector-attr\">[id=1]</span>]\n</code></pre>","children":[{"content":"The <code>Collections.reverse(collection)</code> method does not require that <code>collection</code> implement<br>\n<code>Comparable</code>; it only reverses the insertion order if the <code>collection</code> is not sorted.","children":[{"content":"The <code>sort()</code> and <code>binarySearch()</code> methods allow you to pass in a<br>\n<code>Comparator</code> object when you don&#x2019;t want to use the natural order.","children":[{"content":"The <code>binarySearch()</code> method requires a sorted <code>List</code>. In ascending order<pre data-lines=\"248,254\"><code data-lines=\"248,254\"><span class=\"hljs-number\">11</span>: List&lt;Integer&gt; list = Arrays.<span class=\"hljs-built_in\">asList</span>(<span class=\"hljs-number\">6</span>,<span class=\"hljs-number\">9</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">8</span>);\n<span class=\"hljs-number\">12</span>: Collections.<span class=\"hljs-built_in\">sort</span>(list); // <span class=\"hljs-selector-attr\">[1, 6, 8, 9]</span>\n<span class=\"hljs-number\">13</span>: System.out.<span class=\"hljs-built_in\">println</span>(Collections.<span class=\"hljs-built_in\">binarySearch</span>(list, <span class=\"hljs-number\">6</span>)); // <span class=\"hljs-number\">1</span>\n<span class=\"hljs-number\">14</span>: System.out.<span class=\"hljs-built_in\">println</span>(Collections.<span class=\"hljs-built_in\">binarySearch</span>(list, <span class=\"hljs-number\">3</span>)); // -&#xad;<span class=\"hljs-number\">2</span>\n</code></pre>\nThe number <code>3</code> would need to be inserted at index <code>1</code> (after the number <code>1</code><br>\nbut before the number <code>6</code>). Adding <code>1</code> that gives us 2 and negating that<br>\ngives us <code>&#x2212;2</code>.<br>\n<strong>Works like <code>~</code> operator:</strong><pre data-lines=\"258,263\"><code data-lines=\"258,263\"><span class=\"hljs-built_in\">int</span> <span class=\"hljs-built_in\">num</span> = <span class=\"hljs-number\">10</span>;\n<span class=\"hljs-built_in\">num</span> = ~<span class=\"hljs-built_in\">num</span>;\nSystem.out.println(<span class=\"hljs-built_in\">num</span>);<span class=\"hljs-comment\">//-11</span>\n</code></pre>","children":[{"content":"What do you think the following outputs?<pre data-lines=\"264,270\"><code data-lines=\"264,270\"><span class=\"hljs-number\">3</span>: var names = Arrays.<span class=\"hljs-built_in\">asList</span>(<span class=\"hljs-string\">&quot;Fluffy&quot;</span>, <span class=\"hljs-string\">&quot;Hoppy&quot;</span>);\n<span class=\"hljs-number\">4</span>: Comparator&lt;String&gt; c = Comparator.<span class=\"hljs-built_in\">reverseOrder</span>();\n<span class=\"hljs-number\">5</span>: var index = Collections.<span class=\"hljs-built_in\">binarySearch</span>(names, <span class=\"hljs-string\">&quot;Hoppy&quot;</span>, c);\n<span class=\"hljs-number\">6</span>: System.out.<span class=\"hljs-built_in\">println</span>(index);\n</code></pre>\nThe answer happens to be <code>-&#xad;1</code>. But, you do need to know that the answer<br>\nis not defined. Line 3 creates a list, <code>[Fluffy, Hoppy]</code>. This list happens to be<br>\nsorted in ascending order. Line 4 creates a <code>Comparator</code> that reverses the<br>\nnatural order. Line 5 requests a binary search in descending order. <em>Since<br>\nthe list is not in that order, we don&#x2019;t meet the precondition for doing a search</em>.<br>\nThe result of calling <code>binarySearch()</code> on an improperly sorted list is undefined.","children":[],"payload":{"tag":"li","lines":"263,276"}}],"payload":{"tag":"li","lines":"247,276"}}],"payload":{"tag":"li","lines":"245,276"}}],"payload":{"tag":"li","lines":"243,276"}}],"payload":{"tag":"li","lines":"234,276"}}],"payload":{"tag":"li","lines":"225,276"}}],"payload":{"tag":"li","lines":"211,276"}},{"content":"Collections that require classes to implement<br>\n<code>Comparable</code><br>\n<code>TreeMap</code> and <code>TreeSet</code>","children":[{"content":"Unlike sorting, they don&#x2019;t check that you have<br>\nimplemented <code>Comparable</code> at compile time.","children":[{"content":"\n<pre data-lines=\"281,292\"><code data-lines=\"281,292\"><span class=\"hljs-number\">2</span>: <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">UseTreeSet</span> {\n<span class=\"hljs-number\">3</span>:   record <span class=\"hljs-title class_\">Rabbit</span>(int id) {}\n<span class=\"hljs-number\">4</span>:   <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-built_in\">void</span> <span class=\"hljs-title function_\">main</span>(<span class=\"hljs-params\"><span class=\"hljs-title class_\">String</span>[] args</span>) {\n<span class=\"hljs-number\">5</span>:     <span class=\"hljs-title class_\">Set</span>&lt;<span class=\"hljs-title class_\">Duck</span>&gt; ducks = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TreeSet</span>&lt;&gt;();\n<span class=\"hljs-number\">6</span>:     ducks.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Duck</span>(<span class=\"hljs-string\">&quot;Puddles&quot;</span>));\n<span class=\"hljs-number\">7</span>:\n<span class=\"hljs-number\">8</span>:     <span class=\"hljs-title class_\">Set</span>&lt;<span class=\"hljs-title class_\">Rabbit</span>&gt; rabbits = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TreeSet</span>&lt;&gt;();\n<span class=\"hljs-number\">9</span>:     rabbits.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Rabbit</span>(<span class=\"hljs-number\">1</span>)); <span class=\"hljs-comment\">// ClassCastException</span>\n<span class=\"hljs-number\">10</span>: } }\n</code></pre>","children":[{"content":"Line 6 is fine. <code>Duck</code> does implement <code>Comparable</code>. <code>TreeSet</code> is able to sort it<br>\ninto the proper position in the set. Line 9 is a problem. When <code>TreeSet</code><br>\ntries to sort it, Java discovers the fact that <code>Rabbit</code> does not implement<br>\n<code>Comparable</code>. Java throws an exception that looks like this:<pre data-lines=\"296,301\"><code data-lines=\"296,301\">Exception <span class=\"hljs-keyword\">in</span> thread <span class=\"hljs-string\">&quot;main&quot;</span> java.lang.ClassCastException:\n  <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">UseTreeSet&#x24;Rabbit</span> cannot be cast <span class=\"hljs-keyword\">to</span> <span class=\"hljs-keyword\">class</span>\n<span class=\"hljs-title class_\">java</span>.lang.Comparable\n</code></pre>","children":[{"content":"Just like searching and sorting, you can tell collections that require sorting that<br>\nyou want to use a specific <code>Comparator</code>. For example:<pre data-lines=\"303,307\"><code data-lines=\"303,307\"><span class=\"hljs-number\">8</span>: <span class=\"hljs-built_in\">Set</span>&lt;Rabbit&gt; rabbits = <span class=\"hljs-keyword\">new</span> TreeSet&lt;&gt;<span class=\"hljs-function\"><span class=\"hljs-params\">((r1, r2) -&gt; r1.id - r2.id)</span>;\n9: <span class=\"hljs-title\">rabbits</span>.<span class=\"hljs-title\">add</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">new</span> Rabbit(<span class=\"hljs-number\">1</span>))</span>;\n</span></code></pre>","children":[{"content":"Now Java knows that you want to sort by <code>id</code>, and all is well. A<br>\n<code>Comparator</code> is a helpful object. It lets you separate sort order from the<br>\nobject to be sorted. Notice that line 9 in both of the previous examples<br>\nis the same. It&#x2019;s the declaration of the <code>TreeSet</code> that has changed.","children":[{"content":"<strong>Sorting a List</strong><pre data-lines=\"312,318\"><code data-lines=\"312,318\">List&lt;String&gt; bunnies = Arrays.<span class=\"hljs-keyword\">asList</span>(<span class=\"hljs-string\">&quot;long ear&quot;</span>,<span class=\"hljs-string\">&quot;floppy&quot;</span>,<span class=\"hljs-string\">&quot;hoppy&quot;</span>);\nSystem.out.<span class=\"hljs-keyword\">println</span>(bunnies);    <span class=\"hljs-comment\">// [long ear, floppy, hoppy]</span>\nbunnies.<span class=\"hljs-keyword\">sort</span>((b1, b2) -&gt; b1.<span class=\"hljs-keyword\">compareTo</span>(b2));\nSystem.out.<span class=\"hljs-keyword\">println</span>(bunnies);    <span class=\"hljs-comment\">// [floppy, hoppy, long ear]</span>\n</code></pre>","children":[{"content":"There is <strong>not a sort method</strong> on <strong><code>Set</code></strong> or <strong><code>Map</code></strong>.<br>\nBoth of those types are unordered, so it<br>\nwouldn&#x2019;t make sense to sort them.","children":[],"payload":{"tag":"li","lines":"318,321"}}],"payload":{"tag":"li","lines":"311,321"}}],"payload":{"tag":"li","lines":"307,321"}}],"payload":{"tag":"li","lines":"301,321"}}],"payload":{"tag":"li","lines":"292,321"}}],"payload":{"tag":"li","lines":"281,321"}}],"payload":{"tag":"li","lines":"279,321"}}],"payload":{"tag":"li","lines":"276,321"}},{"content":"<strong>Summary</strong>","children":[{"content":"\n<pre data-lines=\"322,325\"><code data-lines=\"322,325\">Collections.<span class=\"hljs-keyword\">sort</span>(Collection<span class=\"hljs-symbol\">&lt;T&gt;</span>)\n</code></pre>","children":[{"content":"\n<pre data-lines=\"325,328\"><code data-lines=\"325,328\">Collections.<span class=\"hljs-keyword\">sort</span>(Collection<span class=\"hljs-symbol\">&lt;T&gt;</span>,Comparator<span class=\"hljs-symbol\">&lt;T&gt;</span>)\n</code></pre>","children":[],"payload":{"tag":"li","lines":"325,328"}}],"payload":{"tag":"li","lines":"322,328"}},{"content":"\n<pre data-lines=\"328,331\"><code data-lines=\"328,331\"><span class=\"hljs-function\"><span class=\"hljs-title\">binarySearch</span><span class=\"hljs-params\">(Collection&lt;T&gt;,T obj)</span></span>\n</code></pre>","children":[{"content":"\n<pre data-lines=\"331,334\"><code data-lines=\"331,334\">binarySearch(Collection&lt;<span class=\"hljs-built_in\">T</span>&gt;,<span class=\"hljs-built_in\">T</span> obj,Comparator&lt;<span class=\"hljs-built_in\">T</span>&gt;)\n</code></pre>","children":[],"payload":{"tag":"li","lines":"331,334"}}],"payload":{"tag":"li","lines":"328,334"}},{"content":"\n<pre data-lines=\"334,337\"><code data-lines=\"334,337\">List<span class=\"hljs-built_in\">.sort</span>() // Does<span class=\"hljs-built_in\"> not</span><span class=\"hljs-built_in\"> exists</span>\n</code></pre>","children":[{"content":"\n<pre data-lines=\"337,340\"><code data-lines=\"337,340\">List.<span class=\"hljs-keyword\">sort</span>(Comparator<span class=\"hljs-symbol\">&lt;T&gt;</span>)\n</code></pre>","children":[],"payload":{"tag":"li","lines":"337,340"}}],"payload":{"tag":"li","lines":"334,340"}}],"payload":{"tag":"li","lines":"321,340"}}],"payload":{"tag":"h1","lines":"6,7"}},{"initialExpandLevel":1})</script>
</body>
</html>
